package com.mayer.sql.update.version;

import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;

import java.util.ArrayList;
import java.util.regex.Pattern;

/**
 * @author Ivan v. Rikhmayer
 *         This class is intended to
 */
class UpdateBlock {

    // tables
    private static final String SQL_CREATE_WIRELESS_ITEM = "ALTER TABLE wireless_item ADD COLUMN dialCountryCode TEXT";
    private static final String SQL_CREATE_1 = "ALTER TABLE bp_description ADD COLUMN is_failed INTEGER";
    private static final String SQL_CREATE_2 = "ALTER TABLE cashdrawer_tr ADD COLUMN type INTEGER";
    private static final String SQL_CREATE_3 = "ALTER TABLE customer RENAME TO customer_tmp;";
    private static final String SQL_CREATE_4 = "CREATE TABLE customer (guid TEXT PRIMARY KEY, first_name TEXT NOT NULL, last_name TEXT NOT NULL, street TEXT, complementary TEXT, city TEXT, state TEXT, country TEXT, zip TEXT, email TEXT, phone TEXT, sex INTEGER NOT NULL, create_time INTEGER, is_deleted INTEGER DEFAULT (0), update_time INTEGER )";
    private static final String SQL_CREATE_5 = "INSERT INTO customer(guid, first_name, last_name, street, complementary, city, state, country, zip, email, phone, sex, create_time, is_deleted, update_time) SELECT guid, first_name, last_name, street, complementary, city, state, country, zip, email, phone, sex, create_time, is_deleted, update_time FROM customer_tmp;";
    private static final String SQL_CREATE_6 = "DROP TABLE customer_tmp;";
    private static final String SQL_CREATE_7 = "ALTER TABLE employee ADD COLUMN tips_eligible INTEGER;";
    private static final String SQL_CREATE_9 = "ALTER TABLE item ADD COLUMN serializable INTEGER;";
    private static final String SQL_CREATE_10 = "ALTER TABLE item ADD COLUMN code_type INTEGER;";
    private static final String SQL_CREATE_11 = "ALTER TABLE payment_transaction ADD COLUMN gtw_preauth_payment_id TEXT;";
    private static final String SQL_CREATE_12 = "ALTER TABLE payment_transaction ADD COLUMN gateway_closed_perauth_guid TEXT;";
    private static final String SQL_CREATE_13 = "ALTER TABLE payment_transaction ADD COLUMN is_preauth INTEGER;";
    private static final String SQL_CREATE_14 = "ALTER TABLE payment_transaction ADD COLUMN balance TEXT;";
    private static final String SQL_CREATE_15 = "ALTER TABLE sale_order ADD COLUMN is_tipped INTEGER;";
    private static final String SQL_CREATE_16 = "create table unit( _id TEXT PRIMARY KEY, item_id TEXT, serial_code TEXT, code_type INTEGER, status INTEGER, warranty_period INTEGER, sale_order_item_id INTEGER, is_deleted INTEGER DEFAULT (0), update_time INTEGER)";
    private static final String SQL_CREATE_17 = "create table employee_tips( guid TEXT PRIMARY KEY, parent_guid TEXT, employee_id TEXT, shift_id TEXT, order_id TEXT, payment_transaction_id TEXT, create_time INTEGER, amount TEXT, comment TEXT, payment_type INTEGER, is_deleted INTEGER DEFAULT (0), update_time INTEGER)";

    private static final String SQL_ALTER_ITEM_TABLE_ADD_PRODUCT_CODE = "ALTER TABLE item ADD COLUMN product_code TEXT;";
    private static final String SQL_CREATE_ITEM_PRODUCT_IDX = "create index idx_item_product on item( product_code)";

    private static final String SQL_DROP_TOPUP = "DROP TABLE wireless_top_up_item;";
    private static final String SQL_DROP_PIN = "DROP TABLE wireless_pin_item;";

    private static final String SQL_CREATE_113 = "ALTER TABLE unit RENAME TO unit_tmp;";
    private static final String SQL_CREATE_114 = "create table unit( _id TEXT PRIMARY KEY, item_id TEXT, serial_code TEXT, code_type INTEGER, status INTEGER, warranty_period INTEGER, sale_order_item_id TEXT, child_order_item_id TEXT, is_deleted INTEGER DEFAULT (0), update_time INTEGER)";
    private static final String SQL_CREATE_115 = "INSERT INTO unit(_id, item_id, serial_code, code_type, status, warranty_period, sale_order_item_id, is_deleted, update_time) SELECT _id, item_id, serial_code, code_type, status, warranty_period, sale_order_item_id, is_deleted, update_time FROM unit_tmp;";
    private static final String SQL_CREATE_116 = "DROP TABLE unit_tmp;";

    // indexes
    private static final String SQL_CREATE_EMPLOYEE_TIPS_SHIFT = "create index idx_employee_tips_shift on employee_tips( shift_id)";
    private static final String SQL_CREATE_EMPLOYEE_TIPS_CASHIER = "create index idx_employee_tips_cashier on employee_tips( employee_id)";
    private static final String SQL_CREATE_EMPLOYEE_TIPS_ORDER = "create index idx_employee_tips_order on employee_tips( order_id)";
    private static final String SQL_CREATE_EMPLOYEE_TIPS_PAYMENT = "create index idx_employee_tips_payment on employee_tips( payment_transaction_id)";
    private static final String SQL_CREATE_EMPLOYEE_TIPS_IS_DELETED = "create index idx_employee_tips_is_deleted on employee_tips( is_deleted)";

    private static final String SQL_CREATE_CUSTOMER_LAST_NAME = "create index idx_customer_last_name on customer( last_name)";
    private static final String SQL_CREATE_CUSTOMER_EMAIL = "create index idx_customer_email on customer( email)";
    private static final String SQL_CREATE_CUSTOMER_IS_DELETED = "create index idx_customer_is_deleted on customer( is_deleted)";

    public static final String SQL_CREATE_SALE_ORDER_CUSTOMER = "create index idx_sale_order_customer on sale_order( customer_guid)";
    public static final String SQL_CREATE_SALE_ORDER_REGISTER = "create index idx_sale_order_register on sale_order( register_id)";

    public static final String SQL_CREATE_UNIT_IS_DELETED = "create index idx_unit_is_deleted on unit( is_deleted)";

    // Views
    private static final String SQL_CREATE_TIPS_REPORT_VIEW = "CREATE VIEW tips_report_view AS SELECT  tips_table.guid as tips_table_guid, tips_table.parent_guid as tips_table_parent_guid, tips_table.employee_id as tips_table_employee_id, tips_table.shift_id as tips_table_shift_id, tips_table.order_id as tips_table_order_id, tips_table.payment_transaction_id as tips_table_payment_transaction_id, tips_table.create_time as tips_table_create_time, tips_table.amount as tips_table_amount, tips_table.comment as tips_table_comment, tips_table.payment_type as tips_table_payment_type, tips_table.is_deleted as tips_table_is_deleted, tips_table.update_time as tips_table_update_time, shift_table.start_time as shift_table_start_time, shift_table.end_time as shift_table_end_time, employee_table.first_name as employee_table_first_name, employee_table.last_name as employee_table_last_name FROM employee_tips AS tips_table JOIN shift AS shift_table ON shift_table.guid = tips_table.shift_id and shift_table.is_deleted = 0 LEFT OUTER JOIN employee AS employee_table ON employee_table.guid = tips_table.employee_id and employee_table.is_deleted = 0 where tips_table.is_deleted = 0";
    private static final String SQL_CREATE_TIPS_VIEW = "CREATE VIEW tips_view AS SELECT  sale_order_table.guid as sale_order_table_guid, sale_order_table.parent_id as sale_order_table_parent_id, tips_table.guid as tips_table_guid, tips_table.parent_guid as tips_table_parent_guid, tips_table.employee_id as tips_table_employee_id, tips_table.shift_id as tips_table_shift_id, tips_table.order_id as tips_table_order_id, tips_table.payment_transaction_id as tips_table_payment_transaction_id, tips_table.create_time as tips_table_create_time, tips_table.amount as tips_table_amount, tips_table.comment as tips_table_comment, tips_table.payment_type as tips_table_payment_type, tips_table.is_deleted as tips_table_is_deleted, tips_table.update_time as tips_table_update_time FROM sale_order AS sale_order_table JOIN employee_tips AS tips_table ON tips_table.order_id = sale_order_table.guid and tips_table.is_deleted = 0 where sale_order_table.is_deleted = 0";

    private static final String SQL_CREATE_19 = "DROP view if exists customer_view";
    private static final String SQL_CREATE_20 = "DROP view if exists export_items_view";
    private static final String SQL_CREATE_21 = "DROP view if exists export_top_items_view";
    private static final String SQL_CREATE_22 = "DROP view if exists items_ext_view";
    private static final String SQL_CREATE_23 = "DROP view if exists payment_transaction_view";
    private static final String SQL_CREATE_24 = "DROP view if exists prepaid_order_view";
    private static final String SQL_CREATE_25 = "DROP view if exists so_items_fast_view";
    private static final String SQL_CREATE_26 = "DROP view if exists so_items_view";
    private static final String SQL_CREATE_27 = "DROP view if exists so_sale_reports_items_view";
    private static final String SQL_CREATE_28 = "DROP view if exists so_view";

    private static final String SQL_CREATE_CUSTOMER_VIEW = "CREATE VIEW customer_view AS SELECT  sale_order_table.guid as sale_order_table_guid, sale_order_table.create_time as sale_order_table_create_time, sale_order_table.operator_guid as sale_order_table_operator_guid, sale_order_table.shift_guid as sale_order_table_shift_guid, sale_order_table.customer_guid as sale_order_table_customer_guid, sale_order_table.discount as sale_order_table_discount, sale_order_table.discount_type as sale_order_table_discount_type, sale_order_table.status as sale_order_table_status, sale_order_table.hold_name as sale_order_table_hold_name, sale_order_table.taxable as sale_order_table_taxable, sale_order_table.print_seq_num as sale_order_table_print_seq_num, sale_order_table.register_id as sale_order_table_register_id, sale_order_table.parent_id as sale_order_table_parent_id, sale_order_table.order_type as sale_order_table_order_type, sale_order_table.tml_total_price as sale_order_table_tml_total_price, sale_order_table.tml_total_tax as sale_order_table_tml_total_tax, sale_order_table.tml_total_discount as sale_order_table_tml_total_discount, sale_order_table.is_tipped as sale_order_table_is_tipped, sale_order_table.is_deleted as sale_order_table_is_deleted, sale_order_table.update_time as sale_order_table_update_time, customer_table.guid as customer_table_guid, customer_table.first_name as customer_table_first_name, customer_table.last_name as customer_table_last_name, customer_table.street as customer_table_street, customer_table.complementary as customer_table_complementary, customer_table.city as customer_table_city, customer_table.state as customer_table_state, customer_table.country as customer_table_country, customer_table.zip as customer_table_zip, customer_table.email as customer_table_email, customer_table.phone as customer_table_phone, customer_table.sex as customer_table_sex, customer_table.create_time as customer_table_create_time, customer_table.is_deleted as customer_table_is_deleted, customer_table.update_time as customer_table_update_time FROM sale_order AS sale_order_table LEFT OUTER JOIN customer AS customer_table ON customer_table.guid = sale_order_table.customer_guid and customer_table.is_deleted = 0 where sale_order_table.is_deleted = 0";
    private static final String SQL_CREATE_EXPORT_ITEMS_VIEW = "CREATE VIEW export_items_view AS SELECT  item_table.guid as item_table_guid, item_table.category_id as item_table_category_id, item_table.description as item_table_description, item_table.code as item_table_code, item_table.ean_code as item_table_ean_code, item_table.price_type as item_table_price_type, item_table.serializable as item_table_serializable, item_table.sale_price as item_table_sale_price, item_table.units_label as item_table_units_label, item_table.stock_tracking as item_table_stock_tracking, item_table.active_status as item_table_active_status, item_table.discountable as item_table_discountable, item_table.discount as item_table_discount, item_table.discount_type as item_table_discount_type, item_table.taxable as item_table_taxable, item_table.cost as item_table_cost, item_table.minimum_qty as item_table_minimum_qty, item_table.recommended_qty as item_table_recommended_qty, item_table.UPDATE_QTY_FLAG as item_table_UPDATE_QTY_FLAG, item_table.tax_group_guid as item_table_tax_group_guid, item_table.tmp_available_qty as item_table_tmp_available_qty, item_table.order_num as item_table_order_num, item_table.default_modifier_guid as item_table_default_modifier_guid, item_table.printer_alias_guid as item_table_printer_alias_guid, item_table.button_view as item_table_button_view, item_table.has_notes as item_table_has_notes, item_table.code_type as item_table_code_type, item_table.is_deleted as item_table_is_deleted, item_table.update_time as item_table_update_time, category_table.title as category_table_title, category_table.department_guid as category_table_department_guid, department_table.title as department_table_title, sale_order_table.create_time as sale_order_table_create_time FROM item AS item_table JOIN category AS category_table ON category_table.guid = item_table.category_id and category_table.is_deleted = 0 JOIN department AS department_table ON department_table.guid = category_table.department_guid and department_table.is_deleted = 0 LEFT OUTER JOIN sale_order_item AS sale_item_table ON sale_item_table.item_id = item_table.guid and sale_item_table.is_deleted = 0 LEFT OUTER JOIN sale_order AS sale_order_table ON sale_order_table.guid = sale_item_table.order_id and sale_order_table.is_deleted = 0 where item_table.is_deleted = 0";
    private static final String SQL_CREATE_EXPORT_TOP_ITEMS_VIEW = "CREATE VIEW export_top_items_view AS SELECT  sale_item_table.sale_order_item_id as sale_item_table_sale_order_item_id, sale_item_table.order_id as sale_item_table_order_id, sale_item_table.item_id as sale_item_table_item_id, sale_item_table.quantity as sale_item_table_quantity, sale_item_table.price as sale_item_table_price, sale_item_table.price_type as sale_item_table_price_type, sale_item_table.discountable as sale_item_table_discountable, sale_item_table.discount as sale_item_table_discount, sale_item_table.discount_type as sale_item_table_discount_type, sale_item_table.taxable as sale_item_table_taxable, sale_item_table.tax as sale_item_table_tax, sale_item_table.sequence as sale_item_table_sequence, sale_item_table.parent_guid as sale_item_table_parent_guid, sale_item_table.final_gross_price as sale_item_table_final_gross_price, sale_item_table.final_tax as sale_item_table_final_tax, sale_item_table.final_discount as sale_item_table_final_discount, sale_item_table.tmp_refund_quantity as sale_item_table_tmp_refund_quantity, sale_item_table.notes as sale_item_table_notes, sale_item_table.has_notes as sale_item_table_has_notes, sale_item_table.is_deleted as sale_item_table_is_deleted, sale_item_table.update_time as sale_item_table_update_time, sale_order_table.create_time as sale_order_table_create_time, sale_order_table.shift_guid as sale_order_table_shift_guid, sale_order_table.register_id as sale_order_table_register_id, sale_order_table.status as sale_order_table_status, sale_order_table.order_type as sale_order_table_order_type, item_table.guid as item_table_guid, item_table.category_id as item_table_category_id, item_table.description as item_table_description, item_table.code as item_table_code, item_table.ean_code as item_table_ean_code, item_table.price_type as item_table_price_type, item_table.serializable as item_table_serializable, item_table.sale_price as item_table_sale_price, item_table.units_label as item_table_units_label, item_table.stock_tracking as item_table_stock_tracking, item_table.active_status as item_table_active_status, item_table.discountable as item_table_discountable, item_table.discount as item_table_discount, item_table.discount_type as item_table_discount_type, item_table.taxable as item_table_taxable, item_table.cost as item_table_cost, item_table.minimum_qty as item_table_minimum_qty, item_table.recommended_qty as item_table_recommended_qty, item_table.UPDATE_QTY_FLAG as item_table_UPDATE_QTY_FLAG, item_table.tax_group_guid as item_table_tax_group_guid, item_table.tmp_available_qty as item_table_tmp_available_qty, item_table.order_num as item_table_order_num, item_table.default_modifier_guid as item_table_default_modifier_guid, item_table.printer_alias_guid as item_table_printer_alias_guid, item_table.button_view as item_table_button_view, item_table.has_notes as item_table_has_notes, item_table.code_type as item_table_code_type, item_table.is_deleted as item_table_is_deleted, item_table.update_time as item_table_update_time FROM sale_order_item AS sale_item_table JOIN sale_order AS sale_order_table ON sale_order_table.guid = sale_item_table.order_id and sale_order_table.is_deleted = 0 JOIN item AS item_table ON item_table.guid = sale_item_table.item_id where sale_item_table.is_deleted = 0";
    private static final String SQL_CREATE_ITEMS_EXT_VIEW = "CREATE VIEW items_ext_view AS SELECT  item_table.guid as item_table_guid, item_table.category_id as item_table_category_id, item_table.description as item_table_description, item_table.code as item_table_code, item_table.ean_code as item_table_ean_code, item_table.price_type as item_table_price_type, item_table.serializable as item_table_serializable, item_table.sale_price as item_table_sale_price, item_table.units_label as item_table_units_label, item_table.stock_tracking as item_table_stock_tracking, item_table.active_status as item_table_active_status, item_table.discountable as item_table_discountable, item_table.discount as item_table_discount, item_table.discount_type as item_table_discount_type, item_table.taxable as item_table_taxable, item_table.cost as item_table_cost, item_table.minimum_qty as item_table_minimum_qty, item_table.recommended_qty as item_table_recommended_qty, item_table.UPDATE_QTY_FLAG as item_table_UPDATE_QTY_FLAG, item_table.tax_group_guid as item_table_tax_group_guid, item_table.tmp_available_qty as item_table_tmp_available_qty, item_table.order_num as item_table_order_num, item_table.default_modifier_guid as item_table_default_modifier_guid, item_table.printer_alias_guid as item_table_printer_alias_guid, item_table.button_view as item_table_button_view, item_table.has_notes as item_table_has_notes, item_table.code_type as item_table_code_type, item_table.is_deleted as item_table_is_deleted, item_table.update_time as item_table_update_time, category_table.title as category_table_title, category_table.department_guid as category_table_department_guid, modifier_table.unitsLabel as modifier_table_unitsLabel, modifier_table.modifier_guid as modifier_table_modifier_guid, modifier_table.extra_cost as modifier_table_extra_cost, tax_group_table.tax as tax_group_table_tax FROM item AS item_table JOIN category AS category_table ON category_table.guid = item_table.category_id and category_table.is_deleted = 0 LEFT OUTER JOIN items_modifier AS modifier_table ON modifier_table.item_guid = item_table.guid and modifier_table.is_deleted = 0 LEFT OUTER JOIN tax_group AS tax_group_table ON tax_group_table.guid = item_table.tax_group_guid and tax_group_table.is_deleted = 0 where item_table.is_deleted = 0";
    private static final String SQL_CREATE_PAYMENT_TRANSACTION_VIEW = "CREATE VIEW payment_transaction_view AS SELECT  payment_transaction_table.guid as payment_transaction_table_guid, payment_transaction_table.order_guid as payment_transaction_table_order_guid, payment_transaction_table.parent_guid as payment_transaction_table_parent_guid, payment_transaction_table.amount as payment_transaction_table_amount, payment_transaction_table.status as payment_transaction_table_status, payment_transaction_table.unitsLabel as payment_transaction_table_unitsLabel, payment_transaction_table.operator_id as payment_transaction_table_operator_id, payment_transaction_table.gtw_id as payment_transaction_table_gtw_id, payment_transaction_table.gtwp_id as payment_transaction_table_gtwp_id, payment_transaction_table.gtw_preauth_payment_id as payment_transaction_table_gtw_preauth_payment_id, payment_transaction_table.gateway_closed_perauth_guid as payment_transaction_table_gateway_closed_perauth_guid, payment_transaction_table.d_reason as payment_transaction_table_d_reason, payment_transaction_table.create_time as payment_transaction_table_create_time, payment_transaction_table.shift_guid as payment_transaction_table_shift_guid, payment_transaction_table.card_name as payment_transaction_table_card_name, payment_transaction_table.change_amount as payment_transaction_table_change_amount, payment_transaction_table.is_preauth as payment_transaction_table_is_preauth, payment_transaction_table.balance as payment_transaction_table_balance, payment_transaction_table.is_deleted as payment_transaction_table_is_deleted, payment_transaction_table.update_time as payment_transaction_table_update_time, sale_order_table.register_id as sale_order_table_register_id, sale_order_table.guid as sale_order_table_guid, sale_order_table.parent_id as sale_order_table_parent_id, sale_order_table.create_time as sale_order_table_create_time, employee_tips_table.guid as employee_tips_table_guid, employee_tips_table.parent_guid as employee_tips_table_parent_guid, employee_tips_table.employee_id as employee_tips_table_employee_id, employee_tips_table.shift_id as employee_tips_table_shift_id, employee_tips_table.order_id as employee_tips_table_order_id, employee_tips_table.payment_transaction_id as employee_tips_table_payment_transaction_id, employee_tips_table.create_time as employee_tips_table_create_time, employee_tips_table.amount as employee_tips_table_amount, employee_tips_table.comment as employee_tips_table_comment, employee_tips_table.payment_type as employee_tips_table_payment_type, employee_tips_table.is_deleted as employee_tips_table_is_deleted, employee_tips_table.update_time as employee_tips_table_update_time FROM payment_transaction AS payment_transaction_table JOIN sale_order AS sale_order_table ON sale_order_table.guid = payment_transaction_table.order_guid and sale_order_table.is_deleted = 0 LEFT OUTER JOIN employee_tips AS employee_tips_table ON employee_tips_table.payment_transaction_id = payment_transaction_table.guid and employee_tips_table.is_deleted = 0 where payment_transaction_table.is_deleted = 0";
    private static final String SQL_CREATE_PREPAID_ORDER_VIEW = "CREATE VIEW prepaid_order_view AS SELECT  sale_order_table.guid as sale_order_table_guid, sale_order_table.order_type as sale_order_table_order_type, sale_item_table.sale_order_item_id as sale_item_table_sale_order_item_id, bill_payment_description_table.guid as bill_payment_description_table_guid, bill_payment_description_table.description as bill_payment_description_table_description, bill_payment_description_table.type as bill_payment_description_table_type, bill_payment_description_table.is_voided as bill_payment_description_table_is_voided, bill_payment_description_table.is_failed as bill_payment_description_table_is_failed, bill_payment_description_table.order_id as bill_payment_description_table_order_id, bill_payment_description_table.is_deleted as bill_payment_description_table_is_deleted, bill_payment_description_table.update_time as bill_payment_description_table_update_time FROM sale_order AS sale_order_table LEFT OUTER JOIN sale_order_item AS sale_item_table ON sale_item_table.order_id = sale_order_table.guid and sale_item_table.is_deleted = 0 LEFT OUTER JOIN bp_description AS bill_payment_description_table ON bill_payment_description_table.guid = sale_item_table.item_id and bill_payment_description_table.is_deleted = 0 where sale_order_table.is_deleted = 0";
    private static final String SQL_CREATE_SO_ITEMS_FAST_VIEW = "CREATE VIEW so_items_fast_view AS SELECT  sale_item_table.sale_order_item_id as sale_item_table_sale_order_item_id, sale_item_table.order_id as sale_item_table_order_id, sale_item_table.item_id as sale_item_table_item_id, sale_item_table.quantity as sale_item_table_quantity, sale_item_table.price as sale_item_table_price, sale_item_table.price_type as sale_item_table_price_type, sale_item_table.discountable as sale_item_table_discountable, sale_item_table.discount as sale_item_table_discount, sale_item_table.discount_type as sale_item_table_discount_type, sale_item_table.taxable as sale_item_table_taxable, sale_item_table.tax as sale_item_table_tax, sale_item_table.sequence as sale_item_table_sequence, sale_item_table.parent_guid as sale_item_table_parent_guid, sale_item_table.final_gross_price as sale_item_table_final_gross_price, sale_item_table.final_tax as sale_item_table_final_tax, sale_item_table.final_discount as sale_item_table_final_discount, sale_item_table.tmp_refund_quantity as sale_item_table_tmp_refund_quantity, sale_item_table.notes as sale_item_table_notes, sale_item_table.has_notes as sale_item_table_has_notes, sale_item_table.is_deleted as sale_item_table_is_deleted, sale_item_table.update_time as sale_item_table_update_time, sale_order_table.discount as sale_order_table_discount, sale_order_table.discount_type as sale_order_table_discount_type, sale_order_table.taxable as sale_order_table_taxable, item_table.guid as item_table_guid, item_table.category_id as item_table_category_id, item_table.description as item_table_description, item_table.code as item_table_code, item_table.ean_code as item_table_ean_code, item_table.price_type as item_table_price_type, item_table.serializable as item_table_serializable, item_table.sale_price as item_table_sale_price, item_table.units_label as item_table_units_label, item_table.stock_tracking as item_table_stock_tracking, item_table.active_status as item_table_active_status, item_table.discountable as item_table_discountable, item_table.discount as item_table_discount, item_table.discount_type as item_table_discount_type, item_table.taxable as item_table_taxable, item_table.cost as item_table_cost, item_table.minimum_qty as item_table_minimum_qty, item_table.recommended_qty as item_table_recommended_qty, item_table.UPDATE_QTY_FLAG as item_table_UPDATE_QTY_FLAG, item_table.tax_group_guid as item_table_tax_group_guid, item_table.tmp_available_qty as item_table_tmp_available_qty, item_table.order_num as item_table_order_num, item_table.default_modifier_guid as item_table_default_modifier_guid, item_table.printer_alias_guid as item_table_printer_alias_guid, item_table.button_view as item_table_button_view, item_table.has_notes as item_table_has_notes, item_table.code_type as item_table_code_type, item_table.is_deleted as item_table_is_deleted, item_table.update_time as item_table_update_time FROM sale_order_item AS sale_item_table JOIN sale_order AS sale_order_table ON sale_order_table.guid = sale_item_table.order_id and sale_order_table.is_deleted = 0 LEFT OUTER JOIN item AS item_table ON item_table.guid = sale_item_table.item_id and item_table.is_deleted = 0 where sale_item_table.is_deleted = 0";
    private static final String SQL_CREATE_SO_ITEMS_VIEW = "CREATE VIEW so_items_view AS SELECT  sale_item_table.sale_order_item_id as sale_item_table_sale_order_item_id, sale_item_table.order_id as sale_item_table_order_id, sale_item_table.item_id as sale_item_table_item_id, sale_item_table.quantity as sale_item_table_quantity, sale_item_table.price as sale_item_table_price, sale_item_table.price_type as sale_item_table_price_type, sale_item_table.discountable as sale_item_table_discountable, sale_item_table.discount as sale_item_table_discount, sale_item_table.discount_type as sale_item_table_discount_type, sale_item_table.taxable as sale_item_table_taxable, sale_item_table.tax as sale_item_table_tax, sale_item_table.sequence as sale_item_table_sequence, sale_item_table.parent_guid as sale_item_table_parent_guid, sale_item_table.final_gross_price as sale_item_table_final_gross_price, sale_item_table.final_tax as sale_item_table_final_tax, sale_item_table.final_discount as sale_item_table_final_discount, sale_item_table.tmp_refund_quantity as sale_item_table_tmp_refund_quantity, sale_item_table.notes as sale_item_table_notes, sale_item_table.has_notes as sale_item_table_has_notes, sale_item_table.is_deleted as sale_item_table_is_deleted, sale_item_table.update_time as sale_item_table_update_time, sale_order_table.discount as sale_order_table_discount, sale_order_table.discount_type as sale_order_table_discount_type, sale_order_table.taxable as sale_order_table_taxable, sale_order_table.order_type as sale_order_table_order_type, item_table.guid as item_table_guid, item_table.category_id as item_table_category_id, item_table.description as item_table_description, item_table.code as item_table_code, item_table.ean_code as item_table_ean_code, item_table.price_type as item_table_price_type, item_table.serializable as item_table_serializable, item_table.sale_price as item_table_sale_price, item_table.units_label as item_table_units_label, item_table.stock_tracking as item_table_stock_tracking, item_table.active_status as item_table_active_status, item_table.discountable as item_table_discountable, item_table.discount as item_table_discount, item_table.discount_type as item_table_discount_type, item_table.taxable as item_table_taxable, item_table.cost as item_table_cost, item_table.minimum_qty as item_table_minimum_qty, item_table.recommended_qty as item_table_recommended_qty, item_table.UPDATE_QTY_FLAG as item_table_UPDATE_QTY_FLAG, item_table.tax_group_guid as item_table_tax_group_guid, item_table.tmp_available_qty as item_table_tmp_available_qty, item_table.order_num as item_table_order_num, item_table.default_modifier_guid as item_table_default_modifier_guid, item_table.printer_alias_guid as item_table_printer_alias_guid, item_table.button_view as item_table_button_view, item_table.has_notes as item_table_has_notes, item_table.code_type as item_table_code_type, item_table.is_deleted as item_table_is_deleted, item_table.update_time as item_table_update_time, bill_payment_description_table.guid as bill_payment_description_table_guid, bill_payment_description_table.description as bill_payment_description_table_description, bill_payment_description_table.type as bill_payment_description_table_type, bill_payment_description_table.is_voided as bill_payment_description_table_is_voided, bill_payment_description_table.is_failed as bill_payment_description_table_is_failed, bill_payment_description_table.order_id as bill_payment_description_table_order_id, bill_payment_description_table.is_deleted as bill_payment_description_table_is_deleted, bill_payment_description_table.update_time as bill_payment_description_table_update_time, sale_addon_table.guid as sale_addon_table_guid, sale_addon_table.addon_id as sale_addon_table_addon_id, sale_addon_table.item_guid as sale_addon_table_item_guid, sale_addon_table.extra_cost as sale_addon_table_extra_cost, sale_addon_table.addon_type as sale_addon_table_addon_type, sale_addon_table.is_deleted as sale_addon_table_is_deleted, sale_addon_table.update_time as sale_addon_table_update_time, modifier_table.title as modifier_table_title FROM sale_order_item AS sale_item_table JOIN sale_order AS sale_order_table ON sale_order_table.guid = sale_item_table.order_id and sale_order_table.is_deleted = 0 LEFT OUTER JOIN item AS item_table ON item_table.guid = sale_item_table.item_id LEFT OUTER JOIN bp_description AS bill_payment_description_table ON bill_payment_description_table.guid = sale_item_table.item_id LEFT OUTER JOIN sale_order_item_addon AS sale_addon_table ON sale_addon_table.item_guid = sale_item_table.sale_order_item_id and sale_addon_table.is_deleted = 0 LEFT OUTER JOIN items_modifier AS modifier_table ON modifier_table.modifier_guid = sale_addon_table.addon_id and modifier_table.is_deleted = 0 where sale_item_table.is_deleted = 0";
    private static final String SQL_CREATE_SO_SALE_REPORTS_ITEMS_VIEW = "CREATE VIEW so_sale_reports_items_view AS SELECT  sale_item_table.sale_order_item_id as sale_item_table_sale_order_item_id, sale_item_table.order_id as sale_item_table_order_id, sale_item_table.item_id as sale_item_table_item_id, sale_item_table.quantity as sale_item_table_quantity, sale_item_table.price as sale_item_table_price, sale_item_table.price_type as sale_item_table_price_type, sale_item_table.discountable as sale_item_table_discountable, sale_item_table.discount as sale_item_table_discount, sale_item_table.discount_type as sale_item_table_discount_type, sale_item_table.taxable as sale_item_table_taxable, sale_item_table.tax as sale_item_table_tax, sale_item_table.sequence as sale_item_table_sequence, sale_item_table.parent_guid as sale_item_table_parent_guid, sale_item_table.final_gross_price as sale_item_table_final_gross_price, sale_item_table.final_tax as sale_item_table_final_tax, sale_item_table.final_discount as sale_item_table_final_discount, sale_item_table.tmp_refund_quantity as sale_item_table_tmp_refund_quantity, sale_item_table.notes as sale_item_table_notes, sale_item_table.has_notes as sale_item_table_has_notes, sale_item_table.is_deleted as sale_item_table_is_deleted, sale_item_table.update_time as sale_item_table_update_time, sale_order_table.shift_guid as sale_order_table_shift_guid, sale_order_table.status as sale_order_table_status, sale_order_table.taxable as sale_order_table_taxable, sale_order_table.discount as sale_order_table_discount, sale_order_table.discount_type as sale_order_table_discount_type, sale_order_table.create_time as sale_order_table_create_time, sale_order_table.register_id as sale_order_table_register_id, sale_order_table.order_type as sale_order_table_order_type, item_table.description as item_table_description, item_table.cost as item_table_cost, item_table.category_id as item_table_category_id, category_table.title as category_table_title, category_table.department_guid as category_table_department_guid, department_table.title as department_table_title, bill_payment_description_table.guid as bill_payment_description_table_guid, bill_payment_description_table.description as bill_payment_description_table_description, bill_payment_description_table.type as bill_payment_description_table_type, bill_payment_description_table.is_voided as bill_payment_description_table_is_voided, bill_payment_description_table.is_failed as bill_payment_description_table_is_failed, bill_payment_description_table.order_id as bill_payment_description_table_order_id, bill_payment_description_table.is_deleted as bill_payment_description_table_is_deleted, bill_payment_description_table.update_time as bill_payment_description_table_update_time FROM sale_order_item AS sale_item_table JOIN sale_order AS sale_order_table ON sale_order_table.guid = sale_item_table.order_id and sale_order_table.is_deleted = 0 LEFT OUTER JOIN item AS item_table ON item_table.guid = sale_item_table.item_id LEFT OUTER JOIN category AS category_table ON category_table.guid = item_table.category_id and category_table.is_deleted = 0 LEFT OUTER JOIN department AS department_table ON department_table.guid = category_table.department_guid and department_table.is_deleted = 0 LEFT OUTER JOIN bp_description AS bill_payment_description_table ON bill_payment_description_table.guid = sale_item_table.item_id where sale_item_table.is_deleted = 0";
    private static final String SQL_CREATE_SO_VIEW = "CREATE VIEW so_view AS SELECT  sale_order_table.guid as sale_order_table_guid, sale_order_table.create_time as sale_order_table_create_time, sale_order_table.operator_guid as sale_order_table_operator_guid, sale_order_table.shift_guid as sale_order_table_shift_guid, sale_order_table.customer_guid as sale_order_table_customer_guid, sale_order_table.discount as sale_order_table_discount, sale_order_table.discount_type as sale_order_table_discount_type, sale_order_table.status as sale_order_table_status, sale_order_table.hold_name as sale_order_table_hold_name, sale_order_table.taxable as sale_order_table_taxable, sale_order_table.print_seq_num as sale_order_table_print_seq_num, sale_order_table.register_id as sale_order_table_register_id, sale_order_table.parent_id as sale_order_table_parent_id, sale_order_table.order_type as sale_order_table_order_type, sale_order_table.tml_total_price as sale_order_table_tml_total_price, sale_order_table.tml_total_tax as sale_order_table_tml_total_tax, sale_order_table.tml_total_discount as sale_order_table_tml_total_discount, sale_order_table.is_tipped as sale_order_table_is_tipped, sale_order_table.is_deleted as sale_order_table_is_deleted, sale_order_table.update_time as sale_order_table_update_time, operator_table.first_name as operator_table_first_name, operator_table.last_name as operator_table_last_name, customer_table.guid as customer_table_guid, customer_table.first_name as customer_table_first_name, customer_table.last_name as customer_table_last_name, customer_table.phone as customer_table_phone, customer_table.email as customer_table_email, register_table.title as register_table_title, tips_table.amount as tips_table_amount FROM sale_order AS sale_order_table LEFT OUTER JOIN employee AS operator_table ON operator_table.guid = sale_order_table.operator_guid and operator_table.is_deleted = 0 LEFT OUTER JOIN customer AS customer_table ON customer_table.guid = sale_order_table.customer_guid and customer_table.is_deleted = 0 JOIN register AS register_table ON register_table._id = sale_order_table.register_id and register_table.is_deleted = 0 LEFT OUTER JOIN employee_tips AS tips_table ON tips_table.order_id = sale_order_table.guid and tips_table.is_deleted = 0 where sale_order_table.is_deleted = 0";

    private static final String SQL_ALTER_DROP_XREPORT_VIEW = "DROP view if exists xreport_view";
    private static final String SQL_ALTER_CREATE_XREPORT_VIEW = "CREATE VIEW xreport_view AS SELECT sale_item_table.sale_order_item_id as sale_item_table_sale_order_item_id, sale_item_table.order_id as sale_item_table_order_id, sale_item_table.item_id as sale_item_table_item_id, sale_item_table.quantity as sale_item_table_quantity, sale_item_table.price as sale_item_table_price, sale_item_table.price_type as sale_item_table_price_type, sale_item_table.discountable as sale_item_table_discountable, sale_item_table.discount as sale_item_table_discount, sale_item_table.discount_type as sale_item_table_discount_type, sale_item_table.taxable as sale_item_table_taxable, sale_item_table.tax as sale_item_table_tax, sale_item_table.sequence as sale_item_table_sequence, sale_item_table.parent_guid as sale_item_table_parent_guid, sale_item_table.final_gross_price as sale_item_table_final_gross_price, sale_item_table.final_tax as sale_item_table_final_tax, sale_item_table.final_discount as sale_item_table_final_discount, sale_item_table.tmp_refund_quantity as sale_item_table_tmp_refund_quantity, sale_item_table.notes as sale_item_table_notes, sale_item_table.has_notes as sale_item_table_has_notes, sale_item_table.is_deleted as sale_item_table_is_deleted, sale_item_table.update_time as sale_item_table_update_time, sale_order_table.shift_guid as sale_order_table_shift_guid, sale_order_table.status as sale_order_table_status, sale_order_table.taxable as sale_order_table_taxable, sale_order_table.discount as sale_order_table_discount, sale_order_table.discount_type as sale_order_table_discount_type, sale_order_table.create_time as sale_order_table_create_time, sale_order_table.register_id as sale_order_table_register_id, sale_order_table.order_type as sale_order_table_order_type, item_table.guid as item_table_guid, item_table.description as item_table_description, item_table.ean_code as item_table_ean_code, item_table.product_code as item_table_product_code, item_table.cost as item_table_cost, item_table.category_id as item_table_category_id FROM sale_order_item AS sale_item_table LEFT OUTER JOIN sale_order AS sale_order_table ON sale_order_table.guid = sale_item_table.order_id and sale_order_table.is_deleted = 0 LEFT OUTER JOIN item AS item_table ON item_table.guid = sale_item_table.item_id and item_table.is_deleted = 0 where sale_item_table.is_deleted = 0";
    private static final String SQL_ALTER_DROP_SO_SALE_REPORTS_ITEMS_VIEW = "DROP view if exists so_sale_reports_items_view";
    private static final String SQL_ALTER_CREATE_SO_SALE_REPORTS_ITEMS_VIEW = "CREATE VIEW so_sale_reports_items_view AS SELECT  sale_item_table.sale_order_item_id as sale_item_table_sale_order_item_id, sale_item_table.order_id as sale_item_table_order_id, sale_item_table.item_id as sale_item_table_item_id, sale_item_table.quantity as sale_item_table_quantity, sale_item_table.price as sale_item_table_price, sale_item_table.price_type as sale_item_table_price_type, sale_item_table.discountable as sale_item_table_discountable, sale_item_table.discount as sale_item_table_discount, sale_item_table.discount_type as sale_item_table_discount_type, sale_item_table.taxable as sale_item_table_taxable, sale_item_table.tax as sale_item_table_tax, sale_item_table.sequence as sale_item_table_sequence, sale_item_table.parent_guid as sale_item_table_parent_guid, sale_item_table.final_gross_price as sale_item_table_final_gross_price, sale_item_table.final_tax as sale_item_table_final_tax, sale_item_table.final_discount as sale_item_table_final_discount, sale_item_table.tmp_refund_quantity as sale_item_table_tmp_refund_quantity, sale_item_table.notes as sale_item_table_notes, sale_item_table.has_notes as sale_item_table_has_notes, sale_item_table.is_deleted as sale_item_table_is_deleted, sale_item_table.update_time as sale_item_table_update_time, sale_order_table.shift_guid as sale_order_table_shift_guid, sale_order_table.status as sale_order_table_status, sale_order_table.taxable as sale_order_table_taxable, sale_order_table.discount as sale_order_table_discount, sale_order_table.discount_type as sale_order_table_discount_type, sale_order_table.create_time as sale_order_table_create_time, sale_order_table.register_id as sale_order_table_register_id, sale_order_table.order_type as sale_order_table_order_type, item_table.description as item_table_description, item_table.ean_code as item_table_ean_code, item_table.product_code as item_table_product_code, item_table.cost as item_table_cost, item_table.category_id as item_table_category_id, category_table.title as category_table_title, category_table.department_guid as category_table_department_guid, department_table.title as department_table_title, bill_payment_description_table.guid as bill_payment_description_table_guid, bill_payment_description_table.description as bill_payment_description_table_description, bill_payment_description_table.type as bill_payment_description_table_type, bill_payment_description_table.is_voided as bill_payment_description_table_is_voided, bill_payment_description_table.is_failed as bill_payment_description_table_is_failed, bill_payment_description_table.order_id as bill_payment_description_table_order_id, bill_payment_description_table.is_deleted as bill_payment_description_table_is_deleted, bill_payment_description_table.update_time as bill_payment_description_table_update_time FROM sale_order_item AS sale_item_table JOIN sale_order AS sale_order_table ON sale_order_table.guid = sale_item_table.order_id and sale_order_table.is_deleted = 0 LEFT OUTER JOIN item AS item_table ON item_table.guid = sale_item_table.item_id LEFT OUTER JOIN category AS category_table ON category_table.guid = item_table.category_id and category_table.is_deleted = 0 LEFT OUTER JOIN department AS department_table ON department_table.guid = category_table.department_guid and department_table.is_deleted = 0 LEFT OUTER JOIN bp_description AS bill_payment_description_table ON bill_payment_description_table.guid = sale_item_table.item_id where sale_item_table.is_deleted = 0";
    private static final String SQL_ALTER_DROP_INVENTORY_STATUS_REPORT_VIEW = "DROP view if exists inventory_status_report_view";
    private static final String SQL_ALTER_CREATE_INVENTORY_STATUS_REPORT_VIEW = "CREATE VIEW inventory_status_report_view AS SELECT  item_table.guid as item_table_guid, item_table.description as item_table_description, item_table.ean_code as item_table_ean_code, item_table.product_code as item_table_product_code, item_table.cost as item_table_cost, item_table.tmp_available_qty as item_table_tmp_available_qty, item_table.active_status as item_table_active_status, category_table.title as category_table_title, category_table.department_guid as category_table_department_guid, department_table.title as department_table_title FROM item AS item_table JOIN category AS category_table ON category_table.guid = item_table.category_id and category_table.is_deleted = 0 JOIN department AS department_table ON department_table.guid = category_table.department_guid and department_table.is_deleted = 0 where item_table.is_deleted = 0";

    private static final String SQL_CREATE_ACTIVATION_CARRIER_TABLE = "create table activation_carrier( ID INTEGER, NAME TEXT, URL TEXT, IS_ACTIVE INTEGER)";
    private static final String SQL_ALTER_EMPLOYEE_TABLE_ADD_ELIGIBLE_FOR_COMMISSION = "ALTER TABLE employee ADD COLUMN eligible_for_commission INTEGER";
    private static final String SQL_ALTER_EMPLOYEE_TABLE_ADD_COMMISSION = "ALTER TABLE employee ADD COLUMN commission TEXT";
    private static final String SQL_ALTER_CATEGORY_TABLE_ADD_ELIGIBLE_FOR_COMMISSION = "ALTER TABLE category ADD COLUMN eligible_for_commission INTEGER DEFAULT (1)";
    private static final String SQL_ALTER_CATEGORY_TABLE_ADD_COMMISSION = "ALTER TABLE category ADD COLUMN commission TEXT";
    private static final String SQL_ALTER_ITEM_TABLE_ADD_ELIGIBLE_FOR_COMMISSION = "ALTER TABLE item ADD COLUMN eligible_for_commission INTEGER DEFAULT (1)";
    private static final String SQL_ALTER_ITEM_TABLE_ADD_COMMISSION = "ALTER TABLE item ADD COLUMN commission TEXT";

    private static final String SQL_ALTER_DROP_ITEMS_EXT_VIEW = "DROP view if exists items_ext_view";
    private static final String SQL_ALTER_CREATE_ITEMS_EXT_VIEW = "CREATE VIEW items_ext_view AS SELECT  item_table.guid as item_table_guid, item_table.category_id as item_table_category_id, item_table.description as item_table_description, item_table.code as item_table_code, item_table.ean_code as item_table_ean_code, item_table.product_code as item_table_product_code, item_table.price_type as item_table_price_type, item_table.serializable as item_table_serializable, item_table.sale_price as item_table_sale_price, item_table.units_label as item_table_units_label, item_table.stock_tracking as item_table_stock_tracking, item_table.active_status as item_table_active_status, item_table.discountable as item_table_discountable, item_table.discount as item_table_discount, item_table.discount_type as item_table_discount_type, item_table.taxable as item_table_taxable, item_table.cost as item_table_cost, item_table.minimum_qty as item_table_minimum_qty, item_table.recommended_qty as item_table_recommended_qty, item_table.UPDATE_QTY_FLAG as item_table_UPDATE_QTY_FLAG, item_table.tax_group_guid as item_table_tax_group_guid, item_table.tmp_available_qty as item_table_tmp_available_qty, item_table.order_num as item_table_order_num, item_table.default_modifier_guid as item_table_default_modifier_guid, item_table.printer_alias_guid as item_table_printer_alias_guid, item_table.button_view as item_table_button_view, item_table.has_notes as item_table_has_notes, item_table.code_type as item_table_code_type, item_table.eligible_for_commission as item_table_eligible_for_commission, item_table.commission as item_table_commission, item_table.is_deleted as item_table_is_deleted, item_table.update_time as item_table_update_time, category_table.title as category_table_title, category_table.department_guid as category_table_department_guid, modifier_table.unitsLabel as modifier_table_unitsLabel, modifier_table.modifier_guid as modifier_table_modifier_guid, modifier_table.extra_cost as modifier_table_extra_cost, tax_group_table.tax as tax_group_table_tax FROM item AS item_table JOIN category AS category_table ON category_table.guid = item_table.category_id and category_table.is_deleted = 0 LEFT OUTER JOIN items_modifier AS modifier_table ON modifier_table.item_guid = item_table.guid and modifier_table.is_deleted = 0 LEFT OUTER JOIN tax_group AS tax_group_table ON tax_group_table.guid = item_table.tax_group_guid and tax_group_table.is_deleted = 0 where item_table.is_deleted = 0";
    private static final String SQL_ALTER_DROP_EXPORT_ITEMS_VIEW = "DROP view if exists export_items_view";
    private static final String SQL_ALTER_CREATE_EXPORT_ITEMS_VIEW = "CREATE VIEW export_items_view AS SELECT  item_table.guid as item_table_guid, item_table.category_id as item_table_category_id, item_table.description as item_table_description, item_table.code as item_table_code, item_table.ean_code as item_table_ean_code, item_table.product_code as item_table_product_code, item_table.price_type as item_table_price_type, item_table.serializable as item_table_serializable, item_table.sale_price as item_table_sale_price, item_table.units_label as item_table_units_label, item_table.stock_tracking as item_table_stock_tracking, item_table.active_status as item_table_active_status, item_table.discountable as item_table_discountable, item_table.discount as item_table_discount, item_table.discount_type as item_table_discount_type, item_table.taxable as item_table_taxable, item_table.cost as item_table_cost, item_table.minimum_qty as item_table_minimum_qty, item_table.recommended_qty as item_table_recommended_qty, item_table.UPDATE_QTY_FLAG as item_table_UPDATE_QTY_FLAG, item_table.tax_group_guid as item_table_tax_group_guid, item_table.tmp_available_qty as item_table_tmp_available_qty, item_table.order_num as item_table_order_num, item_table.default_modifier_guid as item_table_default_modifier_guid, item_table.printer_alias_guid as item_table_printer_alias_guid, item_table.button_view as item_table_button_view, item_table.has_notes as item_table_has_notes, item_table.code_type as item_table_code_type, item_table.eligible_for_commission as item_table_eligible_for_commission, item_table.commission as item_table_commission, item_table.is_deleted as item_table_is_deleted, item_table.update_time as item_table_update_time, category_table.title as category_table_title, category_table.department_guid as category_table_department_guid, department_table.title as department_table_title, sale_order_table.create_time as sale_order_table_create_time FROM item AS item_table JOIN category AS category_table ON category_table.guid = item_table.category_id and category_table.is_deleted = 0 JOIN department AS department_table ON department_table.guid = category_table.department_guid and department_table.is_deleted = 0 LEFT OUTER JOIN sale_order_item AS sale_item_table ON sale_item_table.item_id = item_table.guid and sale_item_table.is_deleted = 0 LEFT OUTER JOIN sale_order AS sale_order_table ON sale_order_table.guid = sale_item_table.order_id and sale_order_table.is_deleted = 0 where item_table.is_deleted = 0";
    private static final String SQL_ALTER_DROP_EXPORT_TOP_ITEMS_VIEW = "DROP view if exists export_top_items_view";
    private static final String SQL_ALTER_CREATE_EXPORT_TOP_ITEMS_VIEW = "CREATE VIEW export_top_items_view AS SELECT  sale_item_table.sale_order_item_id as sale_item_table_sale_order_item_id, sale_item_table.order_id as sale_item_table_order_id, sale_item_table.item_id as sale_item_table_item_id, sale_item_table.quantity as sale_item_table_quantity, sale_item_table.price as sale_item_table_price, sale_item_table.price_type as sale_item_table_price_type, sale_item_table.discountable as sale_item_table_discountable, sale_item_table.discount as sale_item_table_discount, sale_item_table.discount_type as sale_item_table_discount_type, sale_item_table.taxable as sale_item_table_taxable, sale_item_table.tax as sale_item_table_tax, sale_item_table.sequence as sale_item_table_sequence, sale_item_table.parent_guid as sale_item_table_parent_guid, sale_item_table.final_gross_price as sale_item_table_final_gross_price, sale_item_table.final_tax as sale_item_table_final_tax, sale_item_table.final_discount as sale_item_table_final_discount, sale_item_table.tmp_refund_quantity as sale_item_table_tmp_refund_quantity, sale_item_table.notes as sale_item_table_notes, sale_item_table.has_notes as sale_item_table_has_notes, sale_item_table.is_deleted as sale_item_table_is_deleted, sale_item_table.update_time as sale_item_table_update_time, sale_order_table.create_time as sale_order_table_create_time, sale_order_table.shift_guid as sale_order_table_shift_guid, sale_order_table.register_id as sale_order_table_register_id, sale_order_table.status as sale_order_table_status, sale_order_table.order_type as sale_order_table_order_type, item_table.guid as item_table_guid, item_table.category_id as item_table_category_id, item_table.description as item_table_description, item_table.code as item_table_code, item_table.ean_code as item_table_ean_code, item_table.product_code as item_table_product_code, item_table.price_type as item_table_price_type, item_table.serializable as item_table_serializable, item_table.sale_price as item_table_sale_price, item_table.units_label as item_table_units_label, item_table.stock_tracking as item_table_stock_tracking, item_table.active_status as item_table_active_status, item_table.discountable as item_table_discountable, item_table.discount as item_table_discount, item_table.discount_type as item_table_discount_type, item_table.taxable as item_table_taxable, item_table.cost as item_table_cost, item_table.minimum_qty as item_table_minimum_qty, item_table.recommended_qty as item_table_recommended_qty, item_table.UPDATE_QTY_FLAG as item_table_UPDATE_QTY_FLAG, item_table.tax_group_guid as item_table_tax_group_guid, item_table.tmp_available_qty as item_table_tmp_available_qty, item_table.order_num as item_table_order_num, item_table.default_modifier_guid as item_table_default_modifier_guid, item_table.printer_alias_guid as item_table_printer_alias_guid, item_table.button_view as item_table_button_view, item_table.has_notes as item_table_has_notes, item_table.code_type as item_table_code_type, item_table.eligible_for_commission as item_table_eligible_for_commission, item_table.commission as item_table_commission, item_table.is_deleted as item_table_is_deleted, item_table.update_time as item_table_update_time FROM sale_order_item AS sale_item_table JOIN sale_order AS sale_order_table ON sale_order_table.guid = sale_item_table.order_id and sale_order_table.is_deleted = 0 JOIN item AS item_table ON item_table.guid = sale_item_table.item_id where sale_item_table.is_deleted = 0";
    private static final String SQL_ALTER_DROP_SO_ITEMS_VIEW = "DROP view if exists so_items_view";
    private static final String SQL_ALTER_CREATE_SO_ITEMS_VIEW = "CREATE VIEW so_items_view AS SELECT  sale_item_table.sale_order_item_id as sale_item_table_sale_order_item_id, sale_item_table.order_id as sale_item_table_order_id, sale_item_table.item_id as sale_item_table_item_id, sale_item_table.quantity as sale_item_table_quantity, sale_item_table.price as sale_item_table_price, sale_item_table.price_type as sale_item_table_price_type, sale_item_table.discountable as sale_item_table_discountable, sale_item_table.discount as sale_item_table_discount, sale_item_table.discount_type as sale_item_table_discount_type, sale_item_table.taxable as sale_item_table_taxable, sale_item_table.tax as sale_item_table_tax, sale_item_table.sequence as sale_item_table_sequence, sale_item_table.parent_guid as sale_item_table_parent_guid, sale_item_table.final_gross_price as sale_item_table_final_gross_price, sale_item_table.final_tax as sale_item_table_final_tax, sale_item_table.final_discount as sale_item_table_final_discount, sale_item_table.tmp_refund_quantity as sale_item_table_tmp_refund_quantity, sale_item_table.notes as sale_item_table_notes, sale_item_table.has_notes as sale_item_table_has_notes, sale_item_table.is_deleted as sale_item_table_is_deleted, sale_item_table.update_time as sale_item_table_update_time, sale_order_table.discount as sale_order_table_discount, sale_order_table.discount_type as sale_order_table_discount_type, sale_order_table.taxable as sale_order_table_taxable, sale_order_table.order_type as sale_order_table_order_type, item_table.guid as item_table_guid, item_table.category_id as item_table_category_id, item_table.description as item_table_description, item_table.code as item_table_code, item_table.ean_code as item_table_ean_code, item_table.product_code as item_table_product_code, item_table.price_type as item_table_price_type, item_table.serializable as item_table_serializable, item_table.sale_price as item_table_sale_price, item_table.units_label as item_table_units_label, item_table.stock_tracking as item_table_stock_tracking, item_table.active_status as item_table_active_status, item_table.discountable as item_table_discountable, item_table.discount as item_table_discount, item_table.discount_type as item_table_discount_type, item_table.taxable as item_table_taxable, item_table.cost as item_table_cost, item_table.minimum_qty as item_table_minimum_qty, item_table.recommended_qty as item_table_recommended_qty, item_table.UPDATE_QTY_FLAG as item_table_UPDATE_QTY_FLAG, item_table.tax_group_guid as item_table_tax_group_guid, item_table.tmp_available_qty as item_table_tmp_available_qty, item_table.order_num as item_table_order_num, item_table.default_modifier_guid as item_table_default_modifier_guid, item_table.printer_alias_guid as item_table_printer_alias_guid, item_table.button_view as item_table_button_view, item_table.has_notes as item_table_has_notes, item_table.code_type as item_table_code_type, item_table.eligible_for_commission as item_table_eligible_for_commission, item_table.commission as item_table_commission, item_table.is_deleted as item_table_is_deleted, item_table.update_time as item_table_update_time, bill_payment_description_table.guid as bill_payment_description_table_guid, bill_payment_description_table.description as bill_payment_description_table_description, bill_payment_description_table.type as bill_payment_description_table_type, bill_payment_description_table.is_voided as bill_payment_description_table_is_voided, bill_payment_description_table.is_failed as bill_payment_description_table_is_failed, bill_payment_description_table.order_id as bill_payment_description_table_order_id, bill_payment_description_table.is_deleted as bill_payment_description_table_is_deleted, bill_payment_description_table.update_time as bill_payment_description_table_update_time, sale_addon_table.guid as sale_addon_table_guid, sale_addon_table.addon_id as sale_addon_table_addon_id, sale_addon_table.item_guid as sale_addon_table_item_guid, sale_addon_table.extra_cost as sale_addon_table_extra_cost, sale_addon_table.addon_type as sale_addon_table_addon_type, sale_addon_table.is_deleted as sale_addon_table_is_deleted, sale_addon_table.update_time as sale_addon_table_update_time, modifier_table.title as modifier_table_title FROM sale_order_item AS sale_item_table JOIN sale_order AS sale_order_table ON sale_order_table.guid = sale_item_table.order_id and sale_order_table.is_deleted = 0 LEFT OUTER JOIN item AS item_table ON item_table.guid = sale_item_table.item_id LEFT OUTER JOIN bp_description AS bill_payment_description_table ON bill_payment_description_table.guid = sale_item_table.item_id LEFT OUTER JOIN sale_order_item_addon AS sale_addon_table ON sale_addon_table.item_guid = sale_item_table.sale_order_item_id and sale_addon_table.is_deleted = 0 LEFT OUTER JOIN items_modifier AS modifier_table ON modifier_table.modifier_guid = sale_addon_table.addon_id and modifier_table.is_deleted = 0 where sale_item_table.is_deleted = 0";
    private static final String SQL_ALTER_DROP_SO_ITEMS_FAST_VIEW = "DROP view if exists so_items_fast_view";
    private static final String SQL_ALTER_CREATE_SO_ITEMS_FAST_VIEW = "CREATE VIEW so_items_fast_view AS SELECT  sale_item_table.sale_order_item_id as sale_item_table_sale_order_item_id, sale_item_table.order_id as sale_item_table_order_id, sale_item_table.item_id as sale_item_table_item_id, sale_item_table.quantity as sale_item_table_quantity, sale_item_table.price as sale_item_table_price, sale_item_table.price_type as sale_item_table_price_type, sale_item_table.discountable as sale_item_table_discountable, sale_item_table.discount as sale_item_table_discount, sale_item_table.discount_type as sale_item_table_discount_type, sale_item_table.taxable as sale_item_table_taxable, sale_item_table.tax as sale_item_table_tax, sale_item_table.sequence as sale_item_table_sequence, sale_item_table.parent_guid as sale_item_table_parent_guid, sale_item_table.final_gross_price as sale_item_table_final_gross_price, sale_item_table.final_tax as sale_item_table_final_tax, sale_item_table.final_discount as sale_item_table_final_discount, sale_item_table.tmp_refund_quantity as sale_item_table_tmp_refund_quantity, sale_item_table.notes as sale_item_table_notes, sale_item_table.has_notes as sale_item_table_has_notes, sale_item_table.is_deleted as sale_item_table_is_deleted, sale_item_table.update_time as sale_item_table_update_time, sale_order_table.discount as sale_order_table_discount, sale_order_table.discount_type as sale_order_table_discount_type, sale_order_table.taxable as sale_order_table_taxable, item_table.guid as item_table_guid, item_table.category_id as item_table_category_id, item_table.description as item_table_description, item_table.code as item_table_code, item_table.ean_code as item_table_ean_code, item_table.product_code as item_table_product_code, item_table.price_type as item_table_price_type, item_table.serializable as item_table_serializable, item_table.sale_price as item_table_sale_price, item_table.units_label as item_table_units_label, item_table.stock_tracking as item_table_stock_tracking, item_table.active_status as item_table_active_status, item_table.discountable as item_table_discountable, item_table.discount as item_table_discount, item_table.discount_type as item_table_discount_type, item_table.taxable as item_table_taxable, item_table.cost as item_table_cost, item_table.minimum_qty as item_table_minimum_qty, item_table.recommended_qty as item_table_recommended_qty, item_table.UPDATE_QTY_FLAG as item_table_UPDATE_QTY_FLAG, item_table.tax_group_guid as item_table_tax_group_guid, item_table.tmp_available_qty as item_table_tmp_available_qty, item_table.order_num as item_table_order_num, item_table.default_modifier_guid as item_table_default_modifier_guid, item_table.printer_alias_guid as item_table_printer_alias_guid, item_table.button_view as item_table_button_view, item_table.has_notes as item_table_has_notes, item_table.code_type as item_table_code_type, item_table.eligible_for_commission as item_table_eligible_for_commission, item_table.commission as item_table_commission, item_table.is_deleted as item_table_is_deleted, item_table.update_time as item_table_update_time FROM sale_order_item AS sale_item_table JOIN sale_order AS sale_order_table ON sale_order_table.guid = sale_item_table.order_id and sale_order_table.is_deleted = 0 LEFT OUTER JOIN item AS item_table ON item_table.guid = sale_item_table.item_id and item_table.is_deleted = 0 where sale_item_table.is_deleted = 0";

    private static final String SQL_CREATE_EMPLOYEE_COMMISSIONS_TABLE = "create table employee_commissions( guid TEXT PRIMARY KEY, employee_id TEXT, shift_id TEXT, order_id TEXT, create_time INTEGER, amount TEXT, is_deleted INTEGER DEFAULT (0), update_time INTEGER)";
    private static final String SQL_CREATE_EMPLOYEE_COMMISSIONS_SHIFT_INDEX = "create index idx_employee_commissions_shift on employee_commissions( shift_id)";
    private static final String SQL_CREATE_EMPLOYEE_COMMISSIONS_CASHIER_INDEX = "create index idx_employee_commissions_cashier on employee_commissions( employee_id)";
    private static final String SQL_CREATE_EMPLOYEE_COMMISSIONS_ORDER_INDEX = "create index idx_employee_commissions_order on employee_commissions( order_id)";
    private static final String SQL_CREATE_EMPLOYEE_COMMISSIONS_IS_DELETED_INDEX = "create index idx_employee_commissions_is_deleted on employee_commissions( is_deleted)";
    private static final String SQL_CREATE_SALE_ITEMS_COMMISSIONS_VIEW = "CREATE VIEW sale_items_commissions_view AS SELECT  sale_item_table.sale_order_item_id as sale_item_table_sale_order_item_id, sale_item_table.order_id as sale_item_table_order_id, sale_item_table.item_id as sale_item_table_item_id, sale_item_table.quantity as sale_item_table_quantity, sale_item_table.price as sale_item_table_price, sale_item_table.price_type as sale_item_table_price_type, sale_item_table.discountable as sale_item_table_discountable, sale_item_table.discount as sale_item_table_discount, sale_item_table.discount_type as sale_item_table_discount_type, sale_item_table.taxable as sale_item_table_taxable, sale_item_table.tax as sale_item_table_tax, sale_item_table.sequence as sale_item_table_sequence, sale_item_table.parent_guid as sale_item_table_parent_guid, sale_item_table.final_gross_price as sale_item_table_final_gross_price, sale_item_table.final_tax as sale_item_table_final_tax, sale_item_table.final_discount as sale_item_table_final_discount, sale_item_table.tmp_refund_quantity as sale_item_table_tmp_refund_quantity, sale_item_table.notes as sale_item_table_notes, sale_item_table.has_notes as sale_item_table_has_notes, sale_item_table.is_deleted as sale_item_table_is_deleted, sale_item_table.update_time as sale_item_table_update_time, item_table.eligible_for_commission as item_table_eligible_for_commission, item_table.commission as item_table_commission, category_table.eligible_for_commission as category_table_eligible_for_commission, category_table.commission as category_table_commission FROM sale_order_item AS sale_item_table JOIN item AS item_table ON item_table.guid = sale_item_table.item_id JOIN category AS category_table ON category_table.guid = item_table.category_id where sale_item_table.is_deleted = 0";

    private static final String SQL_ALTER_SALE_ORDER_TABLE_ADD_KITCHEN_PRINT_STATUS = "ALTER TABLE sale_order ADD COLUMN kitchen_print_status INTEGER";
    private static final String SQL_ALTER_DROP_CUSTOMER_VIEW = "DROP view if exists customer_view";
    private static final String SQL_ALTER_CREATE_CUSTOMER_VIEW = "CREATE VIEW customer_view AS SELECT  sale_order_table.guid as sale_order_table_guid, sale_order_table.create_time as sale_order_table_create_time, sale_order_table.operator_guid as sale_order_table_operator_guid, sale_order_table.shift_guid as sale_order_table_shift_guid, sale_order_table.customer_guid as sale_order_table_customer_guid, sale_order_table.discount as sale_order_table_discount, sale_order_table.discount_type as sale_order_table_discount_type, sale_order_table.status as sale_order_table_status, sale_order_table.hold_name as sale_order_table_hold_name, sale_order_table.taxable as sale_order_table_taxable, sale_order_table.print_seq_num as sale_order_table_print_seq_num, sale_order_table.register_id as sale_order_table_register_id, sale_order_table.parent_id as sale_order_table_parent_id, sale_order_table.order_type as sale_order_table_order_type, sale_order_table.tml_total_price as sale_order_table_tml_total_price, sale_order_table.tml_total_tax as sale_order_table_tml_total_tax, sale_order_table.tml_total_discount as sale_order_table_tml_total_discount, sale_order_table.is_tipped as sale_order_table_is_tipped, sale_order_table.kitchen_print_status as sale_order_table_kitchen_print_status, sale_order_table.is_deleted as sale_order_table_is_deleted, sale_order_table.update_time as sale_order_table_update_time, customer_table.guid as customer_table_guid, customer_table.first_name as customer_table_first_name, customer_table.last_name as customer_table_last_name, customer_table.street as customer_table_street, customer_table.complementary as customer_table_complementary, customer_table.city as customer_table_city, customer_table.state as customer_table_state, customer_table.country as customer_table_country, customer_table.zip as customer_table_zip, customer_table.email as customer_table_email, customer_table.phone as customer_table_phone, customer_table.sex as customer_table_sex, customer_table.create_time as customer_table_create_time, customer_table.is_deleted as customer_table_is_deleted, customer_table.update_time as customer_table_update_time FROM sale_order AS sale_order_table LEFT OUTER JOIN customer AS customer_table ON customer_table.guid = sale_order_table.customer_guid and customer_table.is_deleted = 0 where sale_order_table.is_deleted = 0";
    private static final String SQL_ALTER_DROP_SO_VIEW = "DROP view if exists so_view";
    private static final String SQL_ALTER_CREATE_SO_VIEW = "CREATE VIEW so_view AS SELECT  sale_order_table.guid as sale_order_table_guid, sale_order_table.create_time as sale_order_table_create_time, sale_order_table.operator_guid as sale_order_table_operator_guid, sale_order_table.shift_guid as sale_order_table_shift_guid, sale_order_table.customer_guid as sale_order_table_customer_guid, sale_order_table.discount as sale_order_table_discount, sale_order_table.discount_type as sale_order_table_discount_type, sale_order_table.status as sale_order_table_status, sale_order_table.hold_name as sale_order_table_hold_name, sale_order_table.taxable as sale_order_table_taxable, sale_order_table.print_seq_num as sale_order_table_print_seq_num, sale_order_table.register_id as sale_order_table_register_id, sale_order_table.parent_id as sale_order_table_parent_id, sale_order_table.order_type as sale_order_table_order_type, sale_order_table.tml_total_price as sale_order_table_tml_total_price, sale_order_table.tml_total_tax as sale_order_table_tml_total_tax, sale_order_table.tml_total_discount as sale_order_table_tml_total_discount, sale_order_table.is_tipped as sale_order_table_is_tipped, sale_order_table.kitchen_print_status as sale_order_table_kitchen_print_status, sale_order_table.is_deleted as sale_order_table_is_deleted, sale_order_table.update_time as sale_order_table_update_time, operator_table.first_name as operator_table_first_name, operator_table.last_name as operator_table_last_name, customer_table.guid as customer_table_guid, customer_table.first_name as customer_table_first_name, customer_table.last_name as customer_table_last_name, customer_table.phone as customer_table_phone, customer_table.email as customer_table_email, register_table.title as register_table_title, tips_table.amount as tips_table_amount FROM sale_order AS sale_order_table LEFT OUTER JOIN employee AS operator_table ON operator_table.guid = sale_order_table.operator_guid and operator_table.is_deleted = 0 LEFT OUTER JOIN customer AS customer_table ON customer_table.guid = sale_order_table.customer_guid and customer_table.is_deleted = 0 JOIN register AS register_table ON register_table._id = sale_order_table.register_id and register_table.is_deleted = 0 LEFT OUTER JOIN employee_tips AS tips_table ON tips_table.order_id = sale_order_table.guid and tips_table.is_deleted = 0 where sale_order_table.is_deleted = 0";

    private static final String SQL_ALTER_EMPLOYEE_TABLE_ADD_IS_MERCHANT = "ALTER TABLE employee ADD COLUMN is_merchant INTEGER DEFAULT(0)";
    private static final String SQL_SELECT_EMPLOYEE_TABLE_GUID_LOGIN = "SELECT guid, login FROM employee";
    private static final String SQL_UPDATE_EMPLOYEE_TABLE_IS_MERCHANT = "UPDATE employee SET is_merchant = 1 WHERE guid IN ";
    private static final String SQL_CREATE_CATEGORY_VIEW = "CREATE VIEW category_view AS SELECT  category_table._id as _id, category_table.guid as category_table_guid, category_table.department_guid as category_table_department_guid, category_table.title as category_table_title, category_table.image as category_table_image, category_table.order_num as category_table_order_num, category_table.eligible_for_commission as category_table_eligible_for_commission, category_table.commission as category_table_commission, category_table.is_deleted as category_table_is_deleted, category_table.update_time as category_table_update_time, item_table.guid as item_table_guid FROM category AS category_table JOIN item AS item_table ON item_table.category_id = category_table.guid and item_table.is_deleted = 0 where category_table.is_deleted = 0";
    private static final String SQl_ALTER_DROP_CATEGORY_VIEW = "DROP view if exists category_view";
    private static final String SQL_CREATE_CATEGORY_VIEW_2 = "CREATE VIEW category_view AS SELECT category_table._id as _id, category_table.guid as category_table_guid, category_table.department_guid as category_table_department_guid, category_table.title as category_table_title, category_table.image as category_table_image, category_table.order_num as category_table_order_num, category_table.eligible_for_commission as category_table_eligible_for_commission, category_table.commission as category_table_commission, category_table.is_deleted as category_table_is_deleted, category_table.update_time as category_table_update_time, item_table.guid as item_table_guid, item_table.stock_tracking as item_table_stock_tracking, item_table.tmp_available_qty as item_table_tmp_available_qty, item_table.minimum_qty as item_table_minimum_qty FROM category AS category_table JOIN item AS item_table ON item_table.category_id = category_table.guid and item_table.is_deleted = 0 where category_table.is_deleted = 0";

    private static final String SQL_UPDATE_PAYMENT_GATEWAY_OFFLINE_CREDIT = "update payment_transaction set gtw_id = 7 where gtw_id = 5";
    private static final String SQL_UPDATE_PAYMENT_GATEWAY_CASH = "update payment_transaction set gtw_id = 5 where gtw_id = 1";
    private static final String SQL_UPDATE_PAYMENT_GATEWAY_CHECK = "update payment_transaction set gtw_id = 8 where gtw_id = 6";
    private static final String SQL_UPDATE_PAYMENT_GATEWAY_CREDIT = "update payment_transaction set gtw_id = 6 where gtw_id = 4";
    private static final String SQL_UPDATE_PAYMENT_GATEWAY_BLACKSTONE = "update payment_transaction set gtw_id = 4 where gtw_id = 2";
    private static final String SQL_UPDATE_PAYMENT_GATEWAY_PAYPAL = "update payment_transaction set gtw_id = 9 where gtw_id = 3";

    private static final String SQL_ALTER_DROP_EXPORT_SOLD_ITEMS_VIEW = "DROP view if exists export_sold_items";
    private static final String SQL_ALTER_CREATE_EXPORT_SOLD_ITEMS_VIEW = "CREATE VIEW export_sold_items AS SELECT  sale_item_table.sale_order_item_id as sale_item_table_sale_order_item_id, sale_item_table.order_id as sale_item_table_order_id, sale_item_table.item_id as sale_item_table_item_id, sale_item_table.quantity as sale_item_table_quantity, sale_item_table.price as sale_item_table_price, sale_item_table.price_type as sale_item_table_price_type, sale_item_table.discountable as sale_item_table_discountable, sale_item_table.discount as sale_item_table_discount, sale_item_table.discount_type as sale_item_table_discount_type, sale_item_table.taxable as sale_item_table_taxable, sale_item_table.tax as sale_item_table_tax, sale_item_table.sequence as sale_item_table_sequence, sale_item_table.parent_guid as sale_item_table_parent_guid, sale_item_table.final_gross_price as sale_item_table_final_gross_price, sale_item_table.final_tax as sale_item_table_final_tax, sale_item_table.final_discount as sale_item_table_final_discount, sale_item_table.tmp_refund_quantity as sale_item_table_tmp_refund_quantity, sale_item_table.notes as sale_item_table_notes, sale_item_table.has_notes as sale_item_table_has_notes, sale_item_table.is_deleted as sale_item_table_is_deleted, sale_item_table.update_time as sale_item_table_update_time, sale_order_table.shift_guid as sale_order_table_shift_guid, sale_order_table.status as sale_order_table_status, sale_order_table.taxable as sale_order_table_taxable, sale_order_table.discount as sale_order_table_discount, sale_order_table.discount_type as sale_order_table_discount_type, sale_order_table.create_time as sale_order_table_create_time, sale_order_table.register_id as sale_order_table_register_id, sale_order_table.customer_guid as sale_order_table_customer_guid, sale_order_table.order_type as sale_order_table_order_type, item_table.description as item_table_description, item_table.category_id as item_table_category_id, item_table.ean_code as item_table_ean_code, item_table.product_code as item_table_product_code, item_table.guid as item_table_guid, item_table.cost as item_table_cost, category_table.title as category_table_title, category_table.department_guid as category_table_department_guid, department_table.title as department_table_title FROM sale_order_item AS sale_item_table JOIN sale_order AS sale_order_table ON sale_order_table.guid = sale_item_table.order_id and sale_order_table.is_deleted = 0 JOIN item AS item_table ON item_table.guid = sale_item_table.item_id JOIN category AS category_table ON category_table.guid = item_table.category_id and category_table.is_deleted = 0 JOIN department AS department_table ON department_table.guid = category_table.department_guid and department_table.is_deleted = 0 where sale_item_table.is_deleted = 0";

    private static final String SQL_CREATE_REGISTER_COPY = "create table register_copy( _id INTEGER PRIMARY KEY AUTOINCREMENT, register_serial TEXT NOT NULL, title TEXT, status INTEGER NOT NULL, prepaid_tid INTEGER, blackstone_payment_cid INTEGER, is_deleted INTEGER DEFAULT (0), update_time INTEGER)";
    private static final String SQL_COPY_REGISTER = "INSERT INTO register_copy SELECT * FROM register";
    private static final String SQL_DROP_REGISTER = "DROP TABLE if exists register";
    private static final String SQL_ALTER_RENAME_REGISTER = "ALTER TABLE register_copy RENAME TO register";

    private static final String SQL_DROP_WIRELESS_ITEM_IS_DELETED_IDX = "drop index if exists idx_wireless_item_is_deleted";
    private static final String SQL_DROP_UNIT_IS_DELETED_IDX = "drop index if exists idx_unit_is_deleted";
    private static final String SQL_DROP_DEPARTMENT_IS_DELETED_IDX = "drop index if exists idx_department_is_deleted";
    private static final String SQL_DROP_CATEGORY_IS_DELETED_IDX = "drop index if exists idx_category_is_deleted";
    private static final String SQL_DROP_ITEM_IS_DELETED_IDX = "drop index if exists idx_item_is_deleted";
    private static final String SQL_DROP_ITEM_MOVEMENT_IS_DELETED_IDX = "drop index if exists idx_item_movement_is_deleted";
    private static final String SQL_DROP_ITEMS_MODIFIER_IS_DELETED_IDX = "drop index if exists idx_items_modifier_is_deleted";
    private static final String SQL_DROP_SALE_ORDER_IS_DELETED_IDX = "drop index if exists idx_sale_order_is_deleted";
    private static final String SQL_DROP_SALE_ORDER_ITEM_IS_DELETED_IDX = "drop index if exists idx_sale_order_item_is_deleted";
    private static final String SQL_DROP_SALE_ORDER_ITEM_ADDON_IS_DELETED_IDX = "drop index if exists idx_sale_order_item_addon_is_deleted";
    private static final String SQL_DROP_EMPLOYEE_IS_DELETED_IDX = "drop index if exists idx_employee_is_deleted";
    private static final String SQL_DROP_SHIFT_IS_DELETED_IDX = "drop index if exists idx_shift_is_deleted";
    private static final String SQL_DROP_CASHDRAWER_TR_IS_DELETED_IDX = "drop index if exists idx_cashdrawer_tr_is_deleted";
    private static final String SQL_DROP_PAYMENT_TRANSACTION_IS_DELETED_IDX = "drop index if exists idx_payment_transaction_is_deleted";
    private static final String SQL_DROP_EMPLOYEE_TIMESHEET_IS_DELETED_IDX = "drop index if exists idx_employee_timesheet_is_deleted";
    private static final String SQL_DROP_TAX_GROUP_IS_DELETED_IDX = "drop index if exists idx_tax_group_is_deleted";
    private static final String SQL_DROP_REGISTER_IS_DELETED_IDX = "drop index if exists idx_register_is_deleted";
    private static final String SQL_DROP_BP_DESCRIPTION_IS_DELETED_IDX = "drop index if exists idx_bp_description_is_deleted";
    private static final String SQL_DROP_CUSTOMER_IS_DELETED_IDX = "drop index if exists idx_customer_is_deleted";
    private static final String SQL_DROP_PRINTER_ALIAS_TABLE_IS_DELETED_IDX = "drop index if exists idx_printer_alias_table_is_deleted";
    private static final String SQL_DROP_PAX_TABLE_IS_DELETED_IDX = "drop index if exists idx_pax_table_is_deleted";
    private static final String SQL_DROP_PRINTER_ABLE_IS_DELETED_IDX = "drop index if exists idx_printer_able_is_deleted";
    private static final String SQL_DROP_CREDIT_RECEIPT_TABLE_IS_DELETED_IDX = "drop index if exists idx_credit_receipt_table_is_deleted";
    private static final String SQL_DROP_EMPLOYEE_TIPS_IS_DELETED_IDX = "drop index if exists idx_employee_tips_is_deleted";
    private static final String SQL_DROP_EMPLOYEE_COMMISSIONS_IS_DELETED_IDX = "drop index if exists idx_employee_commissions_is_deleted";


    static final String SQL_DROP_TABLE_WIRELESS = "drop table if exists wireless_item";
    static final String SQL_CREATE_WIRELESS_DEMO_ITEM = "create table wireless_item( _id INTEGER PRIMARY KEY AUTOINCREMENT, code TEXT, name TEXT, carrierName TEXT, countryCode TEXT, countryName TEXT, type TEXT, url TEXT, useFixedDenominations INTEGER, denominations TEXT, minDenomination TEXT, maxDenomination TEXT, dialCountryCode TEXT, TermsAndConditions TEXT, productAccessPhones TEXT, merchantBuyingFrequency INTEGER, zipCodeBuyingFrequency INTEGER, is_deleted INTEGER DEFAULT (0), update_time INTEGER, is_draft INTEGER DEFAULT (0))";
    static final String SQL_CREATE_WIRELESS_ITEM_WITH_FEES = "create table wireless_item( _id INTEGER PRIMARY KEY AUTOINCREMENT, code TEXT, name TEXT, carrierName TEXT, countryCode TEXT, countryName TEXT, type TEXT, url TEXT, useFixedDenominations INTEGER, denominations TEXT, minDenomination TEXT, maxDenomination TEXT, dialCountryCode TEXT, TermsAndConditions TEXT, productAccessPhones TEXT, merchantBuyingFrequency INTEGER, zipCodeBuyingFrequency INTEGER, feeAmount TEXT,is_deleted INTEGER DEFAULT (0), update_time INTEGER, is_draft INTEGER DEFAULT (0))";

    static final String SQL_CREATE_BILL_PAYMENT_ITEM = "create table billpayment_item( _id INTEGER PRIMARY KEY AUTOINCREMENT, categoryId TEXT, categoryDescription TEXT, masterBillerId TEXT, masterBillerDescription TEXT)";

    private static final String SQL_ADD_COLUMN_NOTES_IN_CUSTOMER = "ALTER TABLE customer ADD COLUMN notes TEXT";
    private static final String SQL_ALTER_PAYMENT_TRANSACTION_ADD_CASHBACK = "ALTER TABLE payment_transaction ADD COLUMN cash_back TEXT";
    private static final String SQL_CREATE_5_5_PAYMENT_TRANSACTION_VIEW = "CREATE VIEW payment_transaction_view AS SELECT  payment_transaction_table.guid as payment_transaction_table_guid, payment_transaction_table.order_guid as payment_transaction_table_order_guid, payment_transaction_table.parent_guid as payment_transaction_table_parent_guid, payment_transaction_table.amount as payment_transaction_table_amount, payment_transaction_table.status as payment_transaction_table_status, payment_transaction_table.unitsLabel as payment_transaction_table_unitsLabel, payment_transaction_table.operator_id as payment_transaction_table_operator_id, payment_transaction_table.gtw_id as payment_transaction_table_gtw_id, payment_transaction_table.gtwp_id as payment_transaction_table_gtwp_id, payment_transaction_table.gtw_preauth_payment_id as payment_transaction_table_gtw_preauth_payment_id, payment_transaction_table.gateway_closed_perauth_guid as payment_transaction_table_gateway_closed_perauth_guid, payment_transaction_table.d_reason as payment_transaction_table_d_reason, payment_transaction_table.create_time as payment_transaction_table_create_time, payment_transaction_table.shift_guid as payment_transaction_table_shift_guid, payment_transaction_table.card_name as payment_transaction_table_card_name, payment_transaction_table.change_amount as payment_transaction_table_change_amount, payment_transaction_table.is_preauth as payment_transaction_table_is_preauth, payment_transaction_table.balance as payment_transaction_table_balance, payment_transaction_table.cash_back as payment_transaction_table_cash_back, payment_transaction_table.is_deleted as payment_transaction_table_is_deleted, payment_transaction_table.update_time as payment_transaction_table_update_time, sale_order_table.register_id as sale_order_table_register_id, sale_order_table.guid as sale_order_table_guid, sale_order_table.parent_id as sale_order_table_parent_id, sale_order_table.create_time as sale_order_table_create_time, employee_tips_table.guid as employee_tips_table_guid, employee_tips_table.parent_guid as employee_tips_table_parent_guid, employee_tips_table.employee_id as employee_tips_table_employee_id, employee_tips_table.shift_id as employee_tips_table_shift_id, employee_tips_table.order_id as employee_tips_table_order_id, employee_tips_table.payment_transaction_id as employee_tips_table_payment_transaction_id, employee_tips_table.create_time as employee_tips_table_create_time, employee_tips_table.amount as employee_tips_table_amount, employee_tips_table.comment as employee_tips_table_comment, employee_tips_table.payment_type as employee_tips_table_payment_type, employee_tips_table.is_deleted as employee_tips_table_is_deleted, employee_tips_table.update_time as employee_tips_table_update_time FROM payment_transaction AS payment_transaction_table JOIN sale_order AS sale_order_table ON sale_order_table.guid = payment_transaction_table.order_guid and sale_order_table.is_deleted = 0 LEFT OUTER JOIN employee_tips AS employee_tips_table ON employee_tips_table.payment_transaction_id = payment_transaction_table.guid and employee_tips_table.is_deleted = 0 where payment_transaction_table.is_deleted = 0";

    private static final String SQL_ADD_COLUMN_SERIAL_IN_PAX_TABLE = "ALTER TABLE pax_table ADD COLUMN serial TEXT;";

    private static final String SQL_ADD_COLUMN_EMPLOYEE_TABLE = "ALTER TABLE employee ADD COLUMN is_sync INTEGER DEFAULT(1);";

    private static final String SQL_CREATE_APK_UPDATE_TABLE = "CREATE TABLE apk_update (guid TEXT NOT NULL, url TEXT, version TEXT, scheduleTime INTEGER, priority TEXT, aprove INTEGER DEFAULT(0), update_time INTEGER, is_deleted INTEGER DEFAULT(0) )";
    private static final String SQL_INSERT_PRINTER_TYPE = "ALTER TABLE printer_able ADD COLUMN printer_type TEXT ;";
    private static final String SQL_DROP_PRINTER_VIEW = "drop view if exists printer_view";
    private static final String SQL_CREATE_PRINTER_VIEW = "CREATE VIEW printer_view AS SELECT  printer_table.guid as printer_table_guid, printer_table.ip as printer_table_ip, printer_table.port as printer_table_port, printer_table.alias_guid as printer_table_alias_guid, printer_table.mac as printer_table_mac, printer_table.subnet as printer_table_subnet, printer_table.gateway as printer_table_gateway, printer_table.dhcp as printer_table_dhcp, printer_type as printer_table_printer_type, alias_table.alias as alias_table_alias FROM printer_able AS printer_table LEFT OUTER JOIN printer_alias_table AS alias_table ON alias_table.guid = printer_table.alias_guid and alias_table.is_deleted = 0";

    private static final String SQL_CREATE_COMPOSER_TABLE = "create table composer( _id TEXT PRIMARY KEY NOT NULL, item_host_id TEXT NOT NULL, item_child_id TEXT NOT NULL, qty TEXT NOT NULL, store_tracking_enabled INTEGER NOT NULL DEFAULT (0), free_of_charge_composer INTEGER NOT NULL DEFAULT (0), is_deleted INTEGER DEFAULT (0), update_time INTEGER, is_draft INTEGER DEFAULT (0))";
    private static final String SQL_ADD_COLUMN_IN_UNIT_TABLE = "ALTER TABLE unit ADD COLUMN sale_item_id TEXT;";
    private static final String SQL_ADD_COLUMN_IN_ITEM_TABLE_1 = "ALTER TABLE item ADD COLUMN unit_label_id TEXT";
    private static final String SQL_ADD_COLUMN_IN_ITEM_TABLE_2 = "ALTER TABLE item ADD COLUMN salable INTEGER DEFAULT (1);";
    private static final String SQL_ADD_COLUMN_IN_ITEM_TABLE_3 = "ALTER TABLE item ADD COLUMN item_ref_type INTEGER DEFAULT (0) NOT NULL;";
    private static final String SQL_ADD_COLUMN_IN_ITEM_TABLE_4 = "ALTER TABLE item ADD COLUMN reference_item_id TEXT;";
    private static final String SQL_ADD_COLUMN_IN_ITEM_MOVEMENT_TABLE = "ALTER TABLE item_movement ADD COLUMN operator_guid TEXT;";
    private static final String SQL_ADD_COLUMN_IN_ITEM_MODIFIER_TABLE_1 = "ALTER TABLE items_modifier ADD COLUMN item_sub_guid TEXT;";
    private static final String SQL_ADD_COLUMN_IN_ITEM_MODIFIER_TABLE_2 = "ALTER TABLE items_modifier ADD COLUMN item_sub_qty TEXT;";
    private static final String SQL_ADD_COLUMN_IN_ITEM_MODIFIER_TABLE_3 = "ALTER TABLE items_modifier ADD COLUMN item_group_guid TEXT;";
    private static final String SQL_ADD_COLUMN_IN_ITEM_MODIFIER_TABLE_4 = "ALTER TABLE items_modifier ADD COLUMN is_default INTEGER;";
    private static final String SQL_ADD_COLUMN_IN_ITEM_ADDON_TABLE_1 = "ALTER TABLE sale_order_item_addon ADD COLUMN child_item_guid TEXT;";
    private static final String SQL_ADD_COLUMN_IN_ITEM_ADDON_TABLE_2 = "ALTER TABLE sale_order_item_addon ADD COLUMN child_item_qty TEXT;";
    private static final String SQL_CREATE_VARIANT_ITEM_TABLE = "create table variant_item( _id INTEGER PRIMARY KEY NOT NULL, guid TEXT NOT NULL UNIQUE ON CONFLICT REPLACE, item_guid TEXT NOT NULL, shop_id INTEGER NOT NULL, name TEXT NOT NULL, is_deleted INTEGER DEFAULT (0), update_time INTEGER, is_draft INTEGER DEFAULT (0))";
    private static final String SQL_CREATE_VARIANT_SUB_ITEM_TABLE = "create table variant_sub_item( _id INTEGER PRIMARY KEY NOT NULL, guid TEXT NOT NULL UNIQUE ON CONFLICT REPLACE, variant_item_guid TEXT NOT NULL, item_guid TEXT NOT NULL, name TEXT NOT NULL, is_deleted INTEGER DEFAULT (0), update_time INTEGER, is_draft INTEGER DEFAULT (0))";
    private static final String SQL_CREATE_ITEM_MATRIX_TABLE = "create table item_matrix( _id INTEGER PRIMARY KEY NOT NULL, guid TEXT NOT NULL UNIQUE ON CONFLICT REPLACE, parent_guid TEXT NOT NULL, name TEXT NOT NULL, child_guid TEXT, is_deleted INTEGER DEFAULT (0), update_time INTEGER, is_draft INTEGER DEFAULT (0))";
    private static final String SQL_CREATE_VARIANT_VIEW = "CREATE VIEW variant_view AS SELECT  variant_item_table._id as _id, variant_item_table.guid as variant_item_table_guid, variant_item_table.item_guid as variant_item_table_item_guid, variant_item_table.shop_id as variant_item_table_shop_id, variant_item_table.name as variant_item_table_name, variant_item_table.is_deleted as variant_item_table_is_deleted, variant_item_table.update_time as variant_item_table_update_time, variant_item_table.is_draft as variant_item_table_is_draft, variant_sub_item._id as variant_sub_item__id, variant_sub_item.guid as variant_sub_item_guid, variant_sub_item.variant_item_guid as variant_sub_item_variant_item_guid, variant_sub_item.item_guid as variant_sub_item_item_guid, variant_sub_item.name as variant_sub_item_name, variant_sub_item.is_deleted as variant_sub_item_is_deleted, variant_sub_item.update_time as variant_sub_item_update_time, variant_sub_item.is_draft as variant_sub_item_is_draft FROM variant_item AS variant_item_table LEFT OUTER JOIN variant_sub_item AS variant_sub_item ON variant_sub_item.variant_item_guid = variant_item_table.guid and variant_sub_item.is_deleted = 0 where variant_item_table.is_deleted = 0";
    private static final String SQL_CREATE_ITEM_MATRIX_VIEW = "CREATE VIEW item_matrix_view AS SELECT  item_matrix_table._id as _id, item_matrix_table.guid as item_matrix_table_guid, item_matrix_table.parent_guid as item_matrix_table_parent_guid, item_matrix_table.name as item_matrix_table_name, item_matrix_table.child_guid as item_matrix_table_child_guid, item_matrix_table.is_deleted as item_matrix_table_is_deleted, item_matrix_table.update_time as item_matrix_table_update_time, item_matrix_table.is_draft as item_matrix_table_is_draft, item_table.guid as item_table_guid, item_table.category_id as item_table_category_id, item_table.description as item_table_description, item_table.code as item_table_code, item_table.ean_code as item_table_ean_code, item_table.product_code as item_table_product_code, item_table.price_type as item_table_price_type, item_table.serializable as item_table_serializable, item_table.sale_price as item_table_sale_price, item_table.units_label as item_table_units_label, item_table.unit_label_id as item_table_unit_label_id, item_table.stock_tracking as item_table_stock_tracking, item_table.active_status as item_table_active_status, item_table.discountable as item_table_discountable, item_table.salable as item_table_salable, item_table.discount as item_table_discount, item_table.discount_type as item_table_discount_type, item_table.taxable as item_table_taxable, item_table.cost as item_table_cost, item_table.minimum_qty as item_table_minimum_qty, item_table.recommended_qty as item_table_recommended_qty, item_table.UPDATE_QTY_FLAG as item_table_UPDATE_QTY_FLAG, item_table.tax_group_guid as item_table_tax_group_guid, item_table.tmp_available_qty as item_table_tmp_available_qty, item_table.order_num as item_table_order_num, item_table.default_modifier_guid as item_table_default_modifier_guid, item_table.printer_alias_guid as item_table_printer_alias_guid, item_table.button_view as item_table_button_view, item_table.has_notes as item_table_has_notes, item_table.code_type as item_table_code_type, item_table.eligible_for_commission as item_table_eligible_for_commission, item_table.commission as item_table_commission, item_table.item_ref_type as item_table_item_ref_type, item_table.reference_item_id as item_table_reference_item_id, item_table.is_deleted as item_table_is_deleted, item_table.update_time as item_table_update_time, item_table.is_draft as item_table_is_draft FROM item_matrix AS item_matrix_table LEFT OUTER JOIN item AS item_table ON item_table.guid = item_matrix_table.child_guid and item_table.is_deleted = 0 where item_matrix_table.is_deleted = 0";
    private static final String SQL_CREATE_ITEM_MATRIX_VIEW2 = "CREATE VIEW item_matrix_view2 AS SELECT  item_matrix_table._id as _id, item_matrix_table.guid as item_matrix_table_guid, item_matrix_table.parent_guid as item_matrix_table_parent_guid, item_matrix_table.name as item_matrix_table_name, item_matrix_table.child_guid as item_matrix_table_child_guid, item_matrix_table.is_deleted as item_matrix_table_is_deleted, item_matrix_table.update_time as item_matrix_table_update_time, item_matrix_table.is_draft as item_matrix_table_is_draft, item_table.guid as item_table_guid, item_table.category_id as item_table_category_id, item_table.description as item_table_description, item_table.code as item_table_code, item_table.ean_code as item_table_ean_code, item_table.product_code as item_table_product_code, item_table.price_type as item_table_price_type, item_table.serializable as item_table_serializable, item_table.sale_price as item_table_sale_price, item_table.units_label as item_table_units_label, item_table.unit_label_id as item_table_unit_label_id, item_table.stock_tracking as item_table_stock_tracking, item_table.active_status as item_table_active_status, item_table.discountable as item_table_discountable, item_table.salable as item_table_salable, item_table.discount as item_table_discount, item_table.discount_type as item_table_discount_type, item_table.taxable as item_table_taxable, item_table.cost as item_table_cost, item_table.minimum_qty as item_table_minimum_qty, item_table.recommended_qty as item_table_recommended_qty, item_table.UPDATE_QTY_FLAG as item_table_UPDATE_QTY_FLAG, item_table.tax_group_guid as item_table_tax_group_guid, item_table.tmp_available_qty as item_table_tmp_available_qty, item_table.order_num as item_table_order_num, item_table.default_modifier_guid as item_table_default_modifier_guid, item_table.printer_alias_guid as item_table_printer_alias_guid, item_table.button_view as item_table_button_view, item_table.has_notes as item_table_has_notes, item_table.code_type as item_table_code_type, item_table.eligible_for_commission as item_table_eligible_for_commission, item_table.commission as item_table_commission, item_table.item_ref_type as item_table_item_ref_type, item_table.reference_item_id as item_table_reference_item_id, item_table.is_deleted as item_table_is_deleted, item_table.update_time as item_table_update_time, item_table.is_draft as item_table_is_draft FROM item_matrix AS item_matrix_table LEFT OUTER JOIN item AS item_table ON item_table.guid = item_matrix_table.parent_guid and item_table.is_deleted = 0 where item_matrix_table.is_deleted = 0";
    private static final String SQL_CREATE_ITEM_WITH_PARENT_GUID_VIEW = "CREATE VIEW item_with_parent_guid_view AS SELECT  item_table.guid as item_table_guid, item_table.reference_item_id as item_table_reference_item_id, item_matrix_table.parent_guid as item_matrix_table_parent_guid, direct_parent_item_description_table.description as direct_parent_item_description_table_description, parent_item_through_matrix_description_table.description as parent_item_through_matrix_description_table_description FROM item AS item_table LEFT OUTER JOIN item_matrix AS item_matrix_table ON item_matrix_table.child_guid = item_table.guid LEFT OUTER JOIN item AS direct_parent_item_description_table ON direct_parent_item_description_table.guid = item_table.reference_item_id LEFT OUTER JOIN item AS parent_item_through_matrix_description_table ON parent_item_through_matrix_description_table.guid = item_matrix_table.parent_guid";
    private static final String SQL_DROP_SO_ITEMS_VIEW = "DROP VIEW if exists so_items_view";
    private static final String SQL_CREATE_SO_ITEMS_VIEW_2 = "CREATE VIEW so_items_view AS SELECT  sale_item_table.sale_order_item_id as sale_item_table_sale_order_item_id, sale_item_table.order_id as sale_item_table_order_id, sale_item_table.item_id as sale_item_table_item_id, sale_item_table.quantity as sale_item_table_quantity, sale_item_table.kitchen_printed_qty as sale_item_table_kitchen_printed_qty, sale_item_table.price as sale_item_table_price, sale_item_table.price_type as sale_item_table_price_type, sale_item_table.discountable as sale_item_table_discountable, sale_item_table.discount as sale_item_table_discount, sale_item_table.discount_type as sale_item_table_discount_type, sale_item_table.taxable as sale_item_table_taxable, sale_item_table.tax as sale_item_table_tax, sale_item_table.sequence as sale_item_table_sequence, sale_item_table.parent_guid as sale_item_table_parent_guid, sale_item_table.final_gross_price as sale_item_table_final_gross_price, sale_item_table.final_tax as sale_item_table_final_tax, sale_item_table.final_discount as sale_item_table_final_discount, sale_item_table.tmp_refund_quantity as sale_item_table_tmp_refund_quantity, sale_item_table.notes as sale_item_table_notes, sale_item_table.has_notes as sale_item_table_has_notes, sale_item_table.is_deleted as sale_item_table_is_deleted, sale_item_table.update_time as sale_item_table_update_time, sale_item_table.is_draft as sale_item_table_is_draft, sale_order_table.discount as sale_order_table_discount, sale_order_table.discount_type as sale_order_table_discount_type, sale_order_table.taxable as sale_order_table_taxable, sale_order_table.order_type as sale_order_table_order_type, sale_order_table.transaction_fee as sale_order_table_transaction_fee, item_table.guid as item_table_guid, item_table.category_id as item_table_category_id, item_table.description as item_table_description, item_table.code as item_table_code, item_table.ean_code as item_table_ean_code, item_table.product_code as item_table_product_code, item_table.price_type as item_table_price_type, item_table.serializable as item_table_serializable, item_table.sale_price as item_table_sale_price, item_table.units_label as item_table_units_label, item_table.unit_label_id as item_table_unit_label_id, item_table.stock_tracking as item_table_stock_tracking, item_table.active_status as item_table_active_status, item_table.discountable as item_table_discountable, item_table.salable as item_table_salable, item_table.discount as item_table_discount, item_table.discount_type as item_table_discount_type, item_table.taxable as item_table_taxable, item_table.cost as item_table_cost, item_table.minimum_qty as item_table_minimum_qty, item_table.recommended_qty as item_table_recommended_qty, item_table.UPDATE_QTY_FLAG as item_table_UPDATE_QTY_FLAG, item_table.tax_group_guid as item_table_tax_group_guid, item_table.tmp_available_qty as item_table_tmp_available_qty, item_table.order_num as item_table_order_num, item_table.default_modifier_guid as item_table_default_modifier_guid, item_table.printer_alias_guid as item_table_printer_alias_guid, item_table.button_view as item_table_button_view, item_table.has_notes as item_table_has_notes, item_table.code_type as item_table_code_type, item_table.eligible_for_commission as item_table_eligible_for_commission, item_table.commission as item_table_commission, item_table.item_ref_type as item_table_item_ref_type, item_table.reference_item_id as item_table_reference_item_id, item_table.is_deleted as item_table_is_deleted, item_table.update_time as item_table_update_time, item_table.is_draft as item_table_is_draft, bill_payment_description_table.guid as bill_payment_description_table_guid, bill_payment_description_table.description as bill_payment_description_table_description, bill_payment_description_table.type as bill_payment_description_table_type, bill_payment_description_table.is_voided as bill_payment_description_table_is_voided, bill_payment_description_table.is_failed as bill_payment_description_table_is_failed, bill_payment_description_table.order_id as bill_payment_description_table_order_id, bill_payment_description_table.sale_order_id as bill_payment_description_table_sale_order_id, bill_payment_description_table.is_deleted as bill_payment_description_table_is_deleted, bill_payment_description_table.update_time as bill_payment_description_table_update_time, bill_payment_description_table.is_draft as bill_payment_description_table_is_draft, sale_addon_table.guid as sale_addon_table_guid, sale_addon_table.addon_id as sale_addon_table_addon_id, sale_addon_table.item_guid as sale_addon_table_item_guid, sale_addon_table.extra_cost as sale_addon_table_extra_cost, sale_addon_table.addon_type as sale_addon_table_addon_type, sale_addon_table.child_item_guid as sale_addon_table_child_item_guid, sale_addon_table.child_item_qty as sale_addon_table_child_item_qty, sale_addon_table.is_deleted as sale_addon_table_is_deleted, sale_addon_table.update_time as sale_addon_table_update_time, sale_addon_table.is_draft as sale_addon_table_is_draft, sale_addon_sub_item_table.description as sale_addon_sub_item_table_description, sale_addon_sub_item_table.sale_price as sale_addon_sub_item_table_sale_price, modifier_table.title as modifier_table_title, unit_label_table.shortcut as unit_label_table_shortcut FROM sale_order_item AS sale_item_table JOIN sale_order AS sale_order_table ON sale_order_table.guid = sale_item_table.order_id and sale_order_table.is_deleted = 0 LEFT OUTER JOIN item AS item_table ON item_table.guid = sale_item_table.item_id LEFT OUTER JOIN bp_description AS bill_payment_description_table ON bill_payment_description_table.guid = sale_item_table.item_id LEFT OUTER JOIN sale_order_item_addon AS sale_addon_table ON sale_addon_table.item_guid = sale_item_table.sale_order_item_id and sale_addon_table.is_deleted = 0 LEFT OUTER JOIN item AS sale_addon_sub_item_table ON sale_addon_sub_item_table.guid = sale_addon_table.child_item_guid LEFT OUTER JOIN items_modifier AS modifier_table ON modifier_table.modifier_guid = sale_addon_table.addon_id and modifier_table.is_deleted = 0 LEFT OUTER JOIN unit_label_table AS unit_label_table ON unit_label_table.guid = item_table.unit_label_id and unit_label_table.is_deleted = 0 where sale_item_table.is_deleted = 0";
    private static final String SQL_DROP_ITEMS_EXT_VIEW = "DROP VIEW if exists items_ext_view";
    private static final String SQL_CREATE_ITEMS_EXT_VIEW_2 = "CREATE VIEW items_ext_view AS SELECT  item_table.guid as item_table_guid, item_table.category_id as item_table_category_id, item_table.description as item_table_description, item_table.code as item_table_code, item_table.ean_code as item_table_ean_code, item_table.product_code as item_table_product_code, item_table.price_type as item_table_price_type, item_table.serializable as item_table_serializable, item_table.sale_price as item_table_sale_price, item_table.units_label as item_table_units_label, item_table.unit_label_id as item_table_unit_label_id, item_table.stock_tracking as item_table_stock_tracking, item_table.active_status as item_table_active_status, item_table.discountable as item_table_discountable, item_table.salable as item_table_salable, item_table.discount as item_table_discount, item_table.discount_type as item_table_discount_type, item_table.taxable as item_table_taxable, item_table.cost as item_table_cost, item_table.minimum_qty as item_table_minimum_qty, item_table.recommended_qty as item_table_recommended_qty, item_table.UPDATE_QTY_FLAG as item_table_UPDATE_QTY_FLAG, item_table.tax_group_guid as item_table_tax_group_guid, item_table.tmp_available_qty as item_table_tmp_available_qty, item_table.order_num as item_table_order_num, item_table.default_modifier_guid as item_table_default_modifier_guid, item_table.printer_alias_guid as item_table_printer_alias_guid, item_table.button_view as item_table_button_view, item_table.has_notes as item_table_has_notes, item_table.code_type as item_table_code_type, item_table.eligible_for_commission as item_table_eligible_for_commission, item_table.commission as item_table_commission, item_table.item_ref_type as item_table_item_ref_type, item_table.reference_item_id as item_table_reference_item_id, item_table.is_deleted as item_table_is_deleted, item_table.update_time as item_table_update_time, item_table.is_draft as item_table_is_draft, category_table.title as category_table_title, category_table.department_guid as category_table_department_guid, modifier_table.modifier_guid as modifier_table_modifier_guid, modifier_table.title as modifier_table_title, modifier_table.unitsLabel as modifier_table_unitsLabel, modifier_table.item_guid as modifier_table_item_guid, modifier_table.extra_cost as modifier_table_extra_cost, modifier_table.item_sub_guid as modifier_table_item_sub_guid, modifier_table.item_sub_qty as modifier_table_item_sub_qty, modifier_table.item_group_guid as modifier_table_item_group_guid, modifier_table.is_default as modifier_table_is_default, modifier_table.is_deleted as modifier_table_is_deleted, modifier_table.update_time as modifier_table_update_time, modifier_table.is_draft as modifier_table_is_draft, modifier_sub_item_table.sale_price as modifier_sub_item_table_sale_price, tax_group_table.tax as tax_group_table_tax, unit_label_table.shortcut as unit_label_table_shortcut, item_matrix_table.parent_guid as item_matrix_table_parent_guid, child_composer_table._id as child_composer_table__id, host_composer_table._id as host_composer_table__id FROM item AS item_table JOIN category AS category_table ON category_table.guid = item_table.category_id and category_table.is_deleted = 0 JOIN department AS department_table ON department_table.guid = category_table.department_guid and department_table.is_deleted = 0 LEFT OUTER JOIN items_modifier AS modifier_table ON modifier_table.item_guid = item_table.guid and modifier_table.is_deleted = 0 LEFT OUTER JOIN item AS modifier_sub_item_table ON modifier_sub_item_table.guid = modifier_table.item_sub_guid and modifier_sub_item_table.is_deleted = 0 LEFT OUTER JOIN tax_group AS tax_group_table ON tax_group_table.guid = item_table.tax_group_guid and tax_group_table.is_deleted = 0 LEFT OUTER JOIN unit_label_table AS unit_label_table ON unit_label_table.guid = item_table.unit_label_id and unit_label_table.is_deleted = 0 LEFT OUTER JOIN item_matrix AS item_matrix_table ON item_matrix_table.child_guid = item_table.guid and item_matrix_table.is_deleted = 0 LEFT OUTER JOIN composer AS child_composer_table ON child_composer_table.item_host_id = item_table.guid and child_composer_table.is_deleted = 0 LEFT OUTER JOIN composer AS host_composer_table ON host_composer_table.item_child_id = item_table.guid and host_composer_table.is_deleted = 0 where item_table.is_deleted = 0";
    private static final String SQL_DROP_EXPORT_ITEMS_VIEW = "DROP VIEW if exists export_items_view";
    private static final String SQL_CREATE_EXPORT_ITEMS_VIEW_2 = "CREATE VIEW export_items_view AS SELECT  item_table.guid as item_table_guid, item_table.category_id as item_table_category_id, item_table.description as item_table_description, item_table.code as item_table_code, item_table.ean_code as item_table_ean_code, item_table.product_code as item_table_product_code, item_table.price_type as item_table_price_type, item_table.serializable as item_table_serializable, item_table.sale_price as item_table_sale_price, item_table.units_label as item_table_units_label, item_table.unit_label_id as item_table_unit_label_id, item_table.stock_tracking as item_table_stock_tracking, item_table.active_status as item_table_active_status, item_table.discountable as item_table_discountable, item_table.salable as item_table_salable, item_table.discount as item_table_discount, item_table.discount_type as item_table_discount_type, item_table.taxable as item_table_taxable, item_table.cost as item_table_cost, item_table.minimum_qty as item_table_minimum_qty, item_table.recommended_qty as item_table_recommended_qty, item_table.UPDATE_QTY_FLAG as item_table_UPDATE_QTY_FLAG, item_table.tax_group_guid as item_table_tax_group_guid, item_table.tmp_available_qty as item_table_tmp_available_qty, item_table.order_num as item_table_order_num, item_table.default_modifier_guid as item_table_default_modifier_guid, item_table.printer_alias_guid as item_table_printer_alias_guid, item_table.button_view as item_table_button_view, item_table.has_notes as item_table_has_notes, item_table.code_type as item_table_code_type, item_table.eligible_for_commission as item_table_eligible_for_commission, item_table.commission as item_table_commission, item_table.item_ref_type as item_table_item_ref_type, item_table.reference_item_id as item_table_reference_item_id, item_table.is_deleted as item_table_is_deleted, item_table.update_time as item_table_update_time, item_table.is_draft as item_table_is_draft, category_table.title as category_table_title, category_table.department_guid as category_table_department_guid, department_table.title as department_table_title, sale_order_table.create_time as sale_order_table_create_time, unit_label_table.shortcut as unit_label_table_shortcut, item_matrix_table.parent_guid as item_matrix_table_parent_guid FROM item AS item_table JOIN category AS category_table ON category_table.guid = item_table.category_id and category_table.is_deleted = 0 JOIN department AS department_table ON department_table.guid = category_table.department_guid and department_table.is_deleted = 0 LEFT OUTER JOIN sale_order_item AS sale_item_table ON sale_item_table.item_id = item_table.guid and sale_item_table.is_deleted = 0 LEFT OUTER JOIN sale_order AS sale_order_table ON sale_order_table.guid = sale_item_table.order_id and sale_order_table.is_deleted = 0 LEFT OUTER JOIN unit_label_table AS unit_label_table ON unit_label_table.guid = item_table.unit_label_id and unit_label_table.is_deleted = 0 LEFT OUTER JOIN item_matrix AS item_matrix_table ON item_matrix_table.child_guid = item_table.guid and item_matrix_table.is_deleted = 0 where item_table.is_deleted = 0";
    private static final String SQL_DROP_XREPORT_VIEW = "DROP VIEW if exists xreport_view";
    private static final String SQL_CREATE_XREPORT_VIEW = "CREATE VIEW xreport_view AS SELECT  sale_item_table.sale_order_item_id as sale_item_table_sale_order_item_id, sale_item_table.order_id as sale_item_table_order_id, sale_item_table.item_id as sale_item_table_item_id, sale_item_table.quantity as sale_item_table_quantity, sale_item_table.kitchen_printed_qty as sale_item_table_kitchen_printed_qty, sale_item_table.price as sale_item_table_price, sale_item_table.price_type as sale_item_table_price_type, sale_item_table.discountable as sale_item_table_discountable, sale_item_table.discount as sale_item_table_discount, sale_item_table.discount_type as sale_item_table_discount_type, sale_item_table.taxable as sale_item_table_taxable, sale_item_table.tax as sale_item_table_tax, sale_item_table.sequence as sale_item_table_sequence, sale_item_table.parent_guid as sale_item_table_parent_guid, sale_item_table.final_gross_price as sale_item_table_final_gross_price, sale_item_table.final_tax as sale_item_table_final_tax, sale_item_table.final_discount as sale_item_table_final_discount, sale_item_table.tmp_refund_quantity as sale_item_table_tmp_refund_quantity, sale_item_table.notes as sale_item_table_notes, sale_item_table.has_notes as sale_item_table_has_notes, sale_item_table.is_deleted as sale_item_table_is_deleted, sale_item_table.update_time as sale_item_table_update_time, sale_item_table.is_draft as sale_item_table_is_draft, sale_order_table.shift_guid as sale_order_table_shift_guid, sale_order_table.status as sale_order_table_status, sale_order_table.taxable as sale_order_table_taxable, sale_order_table.discount as sale_order_table_discount, sale_order_table.discount_type as sale_order_table_discount_type, sale_order_table.create_time as sale_order_table_create_time, sale_order_table.register_id as sale_order_table_register_id, sale_order_table.order_type as sale_order_table_order_type, sale_order_table.transaction_fee as sale_order_table_transaction_fee, sale_order_table.kitchen_print_status as sale_order_table_kitchen_print_status, item_table.guid as item_table_guid, item_table.description as item_table_description, item_table.ean_code as item_table_ean_code, item_table.product_code as item_table_product_code, item_table.cost as item_table_cost, item_table.category_id as item_table_category_id, item_table.printer_alias_guid as item_table_printer_alias_guid FROM sale_order_item AS sale_item_table LEFT OUTER JOIN sale_order AS sale_order_table ON sale_order_table.guid = sale_item_table.order_id and sale_order_table.is_deleted = 0 LEFT OUTER JOIN item AS item_table ON item_table.guid = sale_item_table.item_id where sale_item_table.is_deleted = 0";
    private static final String SQL_CREATE_ZREPORT_VIEW = "CREATE VIEW zreport_view AS SELECT  sale_order_table.shift_guid as sale_order_table_shift_guid, sale_order_table.status as sale_order_table_status, sale_order_table.taxable as sale_order_table_taxable, sale_order_table.discount as sale_order_table_discount, sale_order_table.discount_type as sale_order_table_discount_type, sale_order_table.create_time as sale_order_table_create_time, sale_order_table.register_id as sale_order_table_register_id, sale_order_table.order_type as sale_order_table_order_type, sale_order_table.transaction_fee as sale_order_table_transaction_fee, sale_order_table.kitchen_print_status as sale_order_table_kitchen_print_status, sale_order_item_table.item_id as sale_order_item_table_item_id, sale_order_item_table.order_id as sale_order_item_table_order_id, sale_order_item_table.kitchen_printed_qty as sale_order_item_table_kitchen_printed_qty, sale_order_item_table.quantity as sale_order_item_table_quantity, item_table.guid as item_table_guid, item_table.description as item_table_description, item_table.ean_code as item_table_ean_code, item_table.product_code as item_table_product_code, item_table.cost as item_table_cost, item_table.category_id as item_table_category_id, item_table.printer_alias_guid as item_table_printer_alias_guid FROM sale_order AS sale_order_table LEFT OUTER JOIN sale_order_item AS sale_order_item_table ON sale_order_item_table.order_id = sale_order_table.guid LEFT OUTER JOIN item AS item_table ON item_table.guid = sale_order_item_table.item_id";
    private static final String SQL_CREATE_SO_COMPOSER_VIEW = "CREATE VIEW so_composer_view AS SELECT  composer_table._id as _id, composer_table.item_host_id as composer_table_item_host_id, composer_table.item_child_id as composer_table_item_child_id, composer_table.qty as composer_table_qty, composer_table.store_tracking_enabled as composer_table_store_tracking_enabled, composer_table.free_of_charge_composer as composer_table_free_of_charge_composer, composer_table.is_deleted as composer_table_is_deleted, composer_table.update_time as composer_table_update_time, composer_table.is_draft as composer_table_is_draft, item_host_table.guid as item_host_table_guid, item_host_table.category_id as item_host_table_category_id, item_host_table.description as item_host_table_description, item_host_table.code as item_host_table_code, item_host_table.ean_code as item_host_table_ean_code, item_host_table.product_code as item_host_table_product_code, item_host_table.price_type as item_host_table_price_type, item_host_table.serializable as item_host_table_serializable, item_host_table.sale_price as item_host_table_sale_price, item_host_table.units_label as item_host_table_units_label, item_host_table.unit_label_id as item_host_table_unit_label_id, item_host_table.stock_tracking as item_host_table_stock_tracking, item_host_table.active_status as item_host_table_active_status, item_host_table.discountable as item_host_table_discountable, item_host_table.salable as item_host_table_salable, item_host_table.discount as item_host_table_discount, item_host_table.discount_type as item_host_table_discount_type, item_host_table.taxable as item_host_table_taxable, item_host_table.cost as item_host_table_cost, item_host_table.minimum_qty as item_host_table_minimum_qty, item_host_table.recommended_qty as item_host_table_recommended_qty, item_host_table.UPDATE_QTY_FLAG as item_host_table_UPDATE_QTY_FLAG, item_host_table.tax_group_guid as item_host_table_tax_group_guid, item_host_table.tmp_available_qty as item_host_table_tmp_available_qty, item_host_table.order_num as item_host_table_order_num, item_host_table.default_modifier_guid as item_host_table_default_modifier_guid, item_host_table.printer_alias_guid as item_host_table_printer_alias_guid, item_host_table.button_view as item_host_table_button_view, item_host_table.has_notes as item_host_table_has_notes, item_host_table.code_type as item_host_table_code_type, item_host_table.eligible_for_commission as item_host_table_eligible_for_commission, item_host_table.commission as item_host_table_commission, item_host_table.item_ref_type as item_host_table_item_ref_type, item_host_table.reference_item_id as item_host_table_reference_item_id, item_host_table.is_deleted as item_host_table_is_deleted, item_host_table.update_time as item_host_table_update_time, item_host_table.is_draft as item_host_table_is_draft, item_child_table.guid as item_child_table_guid, item_child_table.category_id as item_child_table_category_id, item_child_table.description as item_child_table_description, item_child_table.code as item_child_table_code, item_child_table.ean_code as item_child_table_ean_code, item_child_table.product_code as item_child_table_product_code, item_child_table.price_type as item_child_table_price_type, item_child_table.serializable as item_child_table_serializable, item_child_table.sale_price as item_child_table_sale_price, item_child_table.units_label as item_child_table_units_label, item_child_table.unit_label_id as item_child_table_unit_label_id, item_child_table.stock_tracking as item_child_table_stock_tracking, item_child_table.active_status as item_child_table_active_status, item_child_table.discountable as item_child_table_discountable, item_child_table.salable as item_child_table_salable, item_child_table.discount as item_child_table_discount, item_child_table.discount_type as item_child_table_discount_type, item_child_table.taxable as item_child_table_taxable, item_child_table.cost as item_child_table_cost, item_child_table.minimum_qty as item_child_table_minimum_qty, item_child_table.recommended_qty as item_child_table_recommended_qty, item_child_table.UPDATE_QTY_FLAG as item_child_table_UPDATE_QTY_FLAG, item_child_table.tax_group_guid as item_child_table_tax_group_guid, item_child_table.tmp_available_qty as item_child_table_tmp_available_qty, item_child_table.order_num as item_child_table_order_num, item_child_table.default_modifier_guid as item_child_table_default_modifier_guid, item_child_table.printer_alias_guid as item_child_table_printer_alias_guid, item_child_table.button_view as item_child_table_button_view, item_child_table.has_notes as item_child_table_has_notes, item_child_table.code_type as item_child_table_code_type, item_child_table.eligible_for_commission as item_child_table_eligible_for_commission, item_child_table.commission as item_child_table_commission, item_child_table.item_ref_type as item_child_table_item_ref_type, item_child_table.reference_item_id as item_child_table_reference_item_id, item_child_table.is_deleted as item_child_table_is_deleted, item_child_table.update_time as item_child_table_update_time, item_child_table.is_draft as item_child_table_is_draft, unit_label_table.shortcut as unit_label_table_shortcut FROM composer AS composer_table LEFT OUTER JOIN item AS item_host_table ON item_host_table.guid = composer_table.item_host_id LEFT OUTER JOIN item AS item_child_table ON item_child_table.guid = composer_table.item_child_id LEFT OUTER JOIN unit_label_table AS unit_label_table ON unit_label_table.guid = item_child_table.unit_label_id and unit_label_table.is_deleted = 0 where composer_table.is_deleted = 0";
    private static final String SQL_DROP_CATEGORY_VIEW = "DROP VIEW if exists category_view";
    private static final String SQL_CREATE_CATEGORY_VIEW_3 = "CREATE VIEW category_view AS SELECT  category_table._id as _id, category_table.guid as category_table_guid, category_table.department_guid as category_table_department_guid, category_table.title as category_table_title, category_table.image as category_table_image, category_table.order_num as category_table_order_num, category_table.eligible_for_commission as category_table_eligible_for_commission, category_table.commission as category_table_commission, category_table.is_deleted as category_table_is_deleted, category_table.update_time as category_table_update_time, category_table.is_draft as category_table_is_draft, item_table.guid as item_table_guid, item_table.category_id as item_table_category_id, item_table.description as item_table_description, item_table.code as item_table_code, item_table.ean_code as item_table_ean_code, item_table.product_code as item_table_product_code, item_table.price_type as item_table_price_type, item_table.serializable as item_table_serializable, item_table.sale_price as item_table_sale_price, item_table.units_label as item_table_units_label, item_table.unit_label_id as item_table_unit_label_id, item_table.stock_tracking as item_table_stock_tracking, item_table.active_status as item_table_active_status, item_table.discountable as item_table_discountable, item_table.salable as item_table_salable, item_table.discount as item_table_discount, item_table.discount_type as item_table_discount_type, item_table.taxable as item_table_taxable, item_table.cost as item_table_cost, item_table.minimum_qty as item_table_minimum_qty, item_table.recommended_qty as item_table_recommended_qty, item_table.UPDATE_QTY_FLAG as item_table_UPDATE_QTY_FLAG, item_table.tax_group_guid as item_table_tax_group_guid, item_table.tmp_available_qty as item_table_tmp_available_qty, item_table.order_num as item_table_order_num, item_table.default_modifier_guid as item_table_default_modifier_guid, item_table.printer_alias_guid as item_table_printer_alias_guid, item_table.button_view as item_table_button_view, item_table.has_notes as item_table_has_notes, item_table.code_type as item_table_code_type, item_table.eligible_for_commission as item_table_eligible_for_commission, item_table.commission as item_table_commission, item_table.item_ref_type as item_table_item_ref_type, item_table.reference_item_id as item_table_reference_item_id, item_table.is_deleted as item_table_is_deleted, item_table.update_time as item_table_update_time, item_table.is_draft as item_table_is_draft, child_composer_table._id as child_composer_table__id, host_composer_table._id as host_composer_table__id, item_matrix_table.parent_guid as item_matrix_table_parent_guid FROM category AS category_table JOIN department AS department_table ON department_table.guid = category_table.department_guid and department_table.is_deleted = 0 JOIN item AS item_table ON item_table.category_id = category_table.guid LEFT OUTER JOIN composer AS child_composer_table ON child_composer_table.item_host_id = item_table.guid and child_composer_table.is_deleted = 0 LEFT OUTER JOIN composer AS host_composer_table ON host_composer_table.item_child_id = item_table.guid and host_composer_table.is_deleted = 0 LEFT OUTER JOIN item_matrix AS item_matrix_table ON item_matrix_table.child_guid = item_table.guid where category_table.is_deleted = 0";
    private static final String SQL_CREATE_ITEMS_MODIFIER_GROUP_TABLE = "create table items_modifier_group( _id INTEGER PRIMARY KEY AUTOINCREMENT, guid TEXT NOT NULL UNIQUE ON CONFLICT REPLACE, default_guid TEXT, title TEXT NOT NULL, item_guid TEXT NOT NULL, is_deleted INTEGER DEFAULT (0), update_time INTEGER, is_draft INTEGER DEFAULT (0))";
    private static final String SQL_CREATE_SO_MODIFIER_VIEW = "CREATE VIEW so_modifier_view AS SELECT  modifier_table.modifier_guid as modifier_table_modifier_guid, modifier_table.title as modifier_table_title, modifier_table.unitsLabel as modifier_table_unitsLabel, modifier_table.item_guid as modifier_table_item_guid, modifier_table.extra_cost as modifier_table_extra_cost, modifier_table.item_sub_guid as modifier_table_item_sub_guid, modifier_table.item_sub_qty as modifier_table_item_sub_qty, modifier_table.item_group_guid as modifier_table_item_group_guid, modifier_table.is_default as modifier_table_is_default, modifier_table.is_deleted as modifier_table_is_deleted, modifier_table.update_time as modifier_table_update_time, modifier_table.is_draft as modifier_table_is_draft, item_table.guid as item_table_guid, item_table.category_id as item_table_category_id, item_table.description as item_table_description, item_table.code as item_table_code, item_table.ean_code as item_table_ean_code, item_table.product_code as item_table_product_code, item_table.price_type as item_table_price_type, item_table.serializable as item_table_serializable, item_table.sale_price as item_table_sale_price, item_table.units_label as item_table_units_label, item_table.unit_label_id as item_table_unit_label_id, item_table.stock_tracking as item_table_stock_tracking, item_table.active_status as item_table_active_status, item_table.discountable as item_table_discountable, item_table.salable as item_table_salable, item_table.discount as item_table_discount, item_table.discount_type as item_table_discount_type, item_table.taxable as item_table_taxable, item_table.cost as item_table_cost, item_table.minimum_qty as item_table_minimum_qty, item_table.recommended_qty as item_table_recommended_qty, item_table.UPDATE_QTY_FLAG as item_table_UPDATE_QTY_FLAG, item_table.tax_group_guid as item_table_tax_group_guid, item_table.tmp_available_qty as item_table_tmp_available_qty, item_table.order_num as item_table_order_num, item_table.default_modifier_guid as item_table_default_modifier_guid, item_table.printer_alias_guid as item_table_printer_alias_guid, item_table.button_view as item_table_button_view, item_table.has_notes as item_table_has_notes, item_table.code_type as item_table_code_type, item_table.eligible_for_commission as item_table_eligible_for_commission, item_table.commission as item_table_commission, item_table.item_ref_type as item_table_item_ref_type, item_table.reference_item_id as item_table_reference_item_id, item_table.is_deleted as item_table_is_deleted, item_table.update_time as item_table_update_time, item_table.is_draft as item_table_is_draft, item_group_table._id as item_group_table__id, item_group_table.guid as item_group_table_guid, item_group_table.default_guid as item_group_table_default_guid, item_group_table.title as item_group_table_title, item_group_table.item_guid as item_group_table_item_guid, item_group_table.is_deleted as item_group_table_is_deleted, item_group_table.update_time as item_group_table_update_time, item_group_table.is_draft as item_group_table_is_draft, unit_label_table.shortcut as unit_label_table_shortcut, item_host_table.default_modifier_guid as item_host_table_default_modifier_guid FROM items_modifier AS modifier_table LEFT OUTER JOIN item AS item_table ON item_table.guid = modifier_table.item_sub_guid LEFT OUTER JOIN items_modifier_group AS item_group_table ON item_group_table.guid = modifier_table.item_group_guid LEFT OUTER JOIN unit_label_table AS unit_label_table ON unit_label_table.guid = item_table.unit_label_id and unit_label_table.is_deleted = 0 LEFT OUTER JOIN item AS item_host_table ON item_host_table.guid = modifier_table.item_guid where modifier_table.is_deleted = 0";
    private static final String SQL_CREATE_UNIT_LABEL_TABLE = "create table unit_label_table( guid TEXT PRIMARY KEY NOT NULL, description TEXT NOT NULL, shortcut TEXT NOT NULL, is_deleted INTEGER DEFAULT (0), update_time INTEGER, is_draft INTEGER DEFAULT (0))";
    private static final String SQL_CREATE_MODIFIER_GROUP_VIEW = "CREATE VIEW modifier_group_view AS SELECT  group_table._id as _id, group_table.guid as group_table_guid, group_table.default_guid as group_table_default_guid, group_table.title as group_table_title, group_table.item_guid as group_table_item_guid, group_table.is_deleted as group_table_is_deleted, group_table.update_time as group_table_update_time, group_table.is_draft as group_table_is_draft, item_table.modifier_guid as item_table_modifier_guid, item_table.title as item_table_title, item_table.unitsLabel as item_table_unitsLabel, item_table.item_guid as item_table_item_guid, item_table.extra_cost as item_table_extra_cost, item_table.item_sub_guid as item_table_item_sub_guid, item_table.item_sub_qty as item_table_item_sub_qty, item_table.item_group_guid as item_table_item_group_guid, item_table.is_default as item_table_is_default, item_table.is_deleted as item_table_is_deleted, item_table.update_time as item_table_update_time, item_table.is_draft as item_table_is_draft FROM items_modifier_group AS group_table LEFT OUTER JOIN items_modifier AS item_table ON item_table.item_group_guid = group_table.guid and item_table.is_deleted = 0 where group_table.is_deleted = 0";

    static void update6_3to6_4(SQLiteDatabase db) {
        db.execSQL(SQL_INSERT_PRINTER_TYPE);
        db.execSQL(SQL_DROP_PRINTER_VIEW);
        db.execSQL(SQL_CREATE_PRINTER_VIEW);
        db.execSQL(SQL_CREATE_COMPOSER_TABLE);
        db.execSQL(SQL_ADD_COLUMN_IN_UNIT_TABLE);
        db.execSQL(SQL_ADD_COLUMN_IN_ITEM_TABLE_1);
        db.execSQL(SQL_ADD_COLUMN_IN_ITEM_TABLE_2);
        db.execSQL(SQL_ADD_COLUMN_IN_ITEM_TABLE_3);
        db.execSQL(SQL_ADD_COLUMN_IN_ITEM_TABLE_4);
        db.execSQL(SQL_ADD_COLUMN_IN_ITEM_MOVEMENT_TABLE);
        db.execSQL(SQL_ADD_COLUMN_IN_ITEM_MODIFIER_TABLE_1);
        db.execSQL(SQL_ADD_COLUMN_IN_ITEM_MODIFIER_TABLE_2);
        db.execSQL(SQL_ADD_COLUMN_IN_ITEM_MODIFIER_TABLE_3);
        db.execSQL(SQL_ADD_COLUMN_IN_ITEM_MODIFIER_TABLE_4);
        db.execSQL(SQL_ADD_COLUMN_IN_ITEM_ADDON_TABLE_1);
        db.execSQL(SQL_ADD_COLUMN_IN_ITEM_ADDON_TABLE_2);
        db.execSQL(SQL_CREATE_VARIANT_ITEM_TABLE);
        db.execSQL(SQL_CREATE_VARIANT_SUB_ITEM_TABLE);
        db.execSQL(SQL_CREATE_ITEM_MATRIX_TABLE);
        db.execSQL(SQL_CREATE_VARIANT_VIEW);
        db.execSQL(SQL_CREATE_ITEM_MATRIX_VIEW);
        db.execSQL(SQL_CREATE_ITEM_MATRIX_VIEW2);
        db.execSQL(SQL_CREATE_ITEM_WITH_PARENT_GUID_VIEW);
        db.execSQL(SQL_DROP_SO_ITEMS_VIEW);
        db.execSQL(SQL_CREATE_SO_ITEMS_VIEW_2);
        db.execSQL(SQL_DROP_ITEMS_EXT_VIEW);
        db.execSQL(SQL_CREATE_ITEMS_EXT_VIEW_2);
        db.execSQL(SQL_DROP_EXPORT_ITEMS_VIEW);
        db.execSQL(SQL_CREATE_EXPORT_ITEMS_VIEW_2);
        db.execSQL(SQL_DROP_XREPORT_VIEW);
        db.execSQL(SQL_CREATE_XREPORT_VIEW);
        db.execSQL(SQL_CREATE_ZREPORT_VIEW);
        db.execSQL(SQL_CREATE_SO_COMPOSER_VIEW);
        db.execSQL(SQL_DROP_CATEGORY_VIEW);
        db.execSQL(SQL_CREATE_CATEGORY_VIEW_3);
        db.execSQL(SQL_CREATE_ITEMS_MODIFIER_GROUP_TABLE);
        db.execSQL(SQL_CREATE_SO_MODIFIER_VIEW);
        db.execSQL(SQL_CREATE_UNIT_LABEL_TABLE);
        db.execSQL(SQL_CREATE_MODIFIER_GROUP_VIEW);
    }

    static void update5_9to6_1(SQLiteDatabase db) {
        db.execSQL(SQL_CREATE_APK_UPDATE_TABLE);
    }

    static void update5_8to5_9(SQLiteDatabase db) {
        db.execSQL(SQL_ADD_COLUMN_EMPLOYEE_TABLE);
    }

    static void update5_7to5_8(SQLiteDatabase db) {
        db.execSQL(SQL_ADD_COLUMN_SERIAL_IN_PAX_TABLE);
    }

    static void update5_6to5_7(SQLiteDatabase db) {
        db.execSQL(SQL_ADD_COLUMN_NOTES_IN_CUSTOMER);
    }

    static void update5_5to5_6(SQLiteDatabase db) {
        db.execSQL(SQL_DROP_TABLE_WIRELESS);
        db.execSQL(SQL_CREATE_WIRELESS_ITEM_WITH_FEES);
    }

    static void update5_4to5_5(SQLiteDatabase db) {
        db.execSQL(SQL_ALTER_PAYMENT_TRANSACTION_ADD_CASHBACK);
        db.execSQL(SQL_CREATE_23);
        db.execSQL(SQL_CREATE_5_5_PAYMENT_TRANSACTION_VIEW);
    }

    static void update5_3to5_4(SQLiteDatabase db) {
        db.execSQL(SQL_CREATE_BILL_PAYMENT_ITEM);
    }

    static void update5_2to5_3(SQLiteDatabase db) {
        db.execSQL(SQL_DROP_TABLE_WIRELESS);
        db.execSQL(SQL_CREATE_WIRELESS_DEMO_ITEM);
    }

    static void update4_1to4_2(SQLiteDatabase database) {
        database.execSQL(SQL_DROP_WIRELESS_ITEM_IS_DELETED_IDX);
        database.execSQL(SQL_DROP_UNIT_IS_DELETED_IDX);
        database.execSQL(SQL_DROP_DEPARTMENT_IS_DELETED_IDX);
        database.execSQL(SQL_DROP_CATEGORY_IS_DELETED_IDX);
        database.execSQL(SQL_DROP_ITEM_IS_DELETED_IDX);
        database.execSQL(SQL_DROP_ITEM_MOVEMENT_IS_DELETED_IDX);
        database.execSQL(SQL_DROP_ITEMS_MODIFIER_IS_DELETED_IDX);
        database.execSQL(SQL_DROP_SALE_ORDER_IS_DELETED_IDX);
        database.execSQL(SQL_DROP_SALE_ORDER_ITEM_IS_DELETED_IDX);
        database.execSQL(SQL_DROP_SALE_ORDER_ITEM_ADDON_IS_DELETED_IDX);
        database.execSQL(SQL_DROP_EMPLOYEE_IS_DELETED_IDX);
        database.execSQL(SQL_DROP_SHIFT_IS_DELETED_IDX);
        database.execSQL(SQL_DROP_CASHDRAWER_TR_IS_DELETED_IDX);
        database.execSQL(SQL_DROP_PAYMENT_TRANSACTION_IS_DELETED_IDX);
        database.execSQL(SQL_DROP_EMPLOYEE_TIMESHEET_IS_DELETED_IDX);
        database.execSQL(SQL_DROP_TAX_GROUP_IS_DELETED_IDX);
        database.execSQL(SQL_DROP_REGISTER_IS_DELETED_IDX);
        database.execSQL(SQL_DROP_BP_DESCRIPTION_IS_DELETED_IDX);
        database.execSQL(SQL_DROP_CUSTOMER_IS_DELETED_IDX);
        database.execSQL(SQL_DROP_PRINTER_ALIAS_TABLE_IS_DELETED_IDX);
        database.execSQL(SQL_DROP_PAX_TABLE_IS_DELETED_IDX);
        database.execSQL(SQL_DROP_PRINTER_ABLE_IS_DELETED_IDX);
        database.execSQL(SQL_DROP_CREDIT_RECEIPT_TABLE_IS_DELETED_IDX);
        database.execSQL(SQL_DROP_EMPLOYEE_TIPS_IS_DELETED_IDX);
        database.execSQL(SQL_DROP_EMPLOYEE_COMMISSIONS_IS_DELETED_IDX);
    }

    static void update4to4_1(SQLiteDatabase database) {
        database.execSQL(SQL_CREATE_REGISTER_COPY);
        database.execSQL(SQL_COPY_REGISTER);
        database.execSQL(SQL_DROP_REGISTER);
        database.execSQL(SQL_ALTER_RENAME_REGISTER);
    }

    static void update3to4(SQLiteDatabase database) {
        database.execSQL(SQL_CREATE_ACTIVATION_CARRIER_TABLE);
        database.execSQL(SQL_ALTER_EMPLOYEE_TABLE_ADD_ELIGIBLE_FOR_COMMISSION);
        database.execSQL(SQL_ALTER_EMPLOYEE_TABLE_ADD_COMMISSION);
        database.execSQL(SQL_ALTER_CATEGORY_TABLE_ADD_ELIGIBLE_FOR_COMMISSION);
        database.execSQL(SQL_ALTER_CATEGORY_TABLE_ADD_COMMISSION);

        database.execSQL(SQL_ALTER_ITEM_TABLE_ADD_PRODUCT_CODE);
        database.execSQL(SQL_CREATE_ITEM_PRODUCT_IDX);

        database.execSQL(SQL_ALTER_ITEM_TABLE_ADD_ELIGIBLE_FOR_COMMISSION);
        database.execSQL(SQL_ALTER_ITEM_TABLE_ADD_COMMISSION);

        database.execSQL(SQL_ALTER_DROP_ITEMS_EXT_VIEW);
        database.execSQL(SQL_ALTER_CREATE_ITEMS_EXT_VIEW);
        database.execSQL(SQL_ALTER_DROP_EXPORT_ITEMS_VIEW);
        database.execSQL(SQL_ALTER_CREATE_EXPORT_ITEMS_VIEW);
        database.execSQL(SQL_ALTER_DROP_EXPORT_TOP_ITEMS_VIEW);
        database.execSQL(SQL_ALTER_CREATE_EXPORT_TOP_ITEMS_VIEW);
        database.execSQL(SQL_ALTER_DROP_SO_ITEMS_VIEW);
        database.execSQL(SQL_ALTER_CREATE_SO_ITEMS_VIEW);
        database.execSQL(SQL_ALTER_DROP_SO_ITEMS_FAST_VIEW);
        database.execSQL(SQL_ALTER_CREATE_SO_ITEMS_FAST_VIEW);

        database.execSQL(SQL_ALTER_DROP_INVENTORY_STATUS_REPORT_VIEW);
        database.execSQL(SQL_ALTER_CREATE_INVENTORY_STATUS_REPORT_VIEW);
        database.execSQL(SQL_ALTER_DROP_XREPORT_VIEW);
        database.execSQL(SQL_ALTER_CREATE_XREPORT_VIEW);
        database.execSQL(SQL_ALTER_DROP_SO_SALE_REPORTS_ITEMS_VIEW);
        database.execSQL(SQL_ALTER_CREATE_SO_SALE_REPORTS_ITEMS_VIEW);

        database.execSQL(SQL_ALTER_DROP_EXPORT_SOLD_ITEMS_VIEW);
        database.execSQL(SQL_ALTER_CREATE_EXPORT_SOLD_ITEMS_VIEW);

        database.execSQL(SQL_CREATE_EMPLOYEE_COMMISSIONS_TABLE);
        database.execSQL(SQL_CREATE_EMPLOYEE_COMMISSIONS_SHIFT_INDEX);
        database.execSQL(SQL_CREATE_EMPLOYEE_COMMISSIONS_CASHIER_INDEX);
        database.execSQL(SQL_CREATE_EMPLOYEE_COMMISSIONS_ORDER_INDEX);
        database.execSQL(SQL_CREATE_EMPLOYEE_COMMISSIONS_IS_DELETED_INDEX);
        database.execSQL(SQL_CREATE_SALE_ITEMS_COMMISSIONS_VIEW);
        database.execSQL(SQL_ALTER_SALE_ORDER_TABLE_ADD_KITCHEN_PRINT_STATUS);
        database.execSQL(SQL_ALTER_DROP_CUSTOMER_VIEW);
        database.execSQL(SQL_ALTER_CREATE_CUSTOMER_VIEW);
        database.execSQL(SQL_ALTER_DROP_SO_VIEW);
        database.execSQL(SQL_ALTER_CREATE_SO_VIEW);

        database.execSQL(SQL_ALTER_EMPLOYEE_TABLE_ADD_IS_MERCHANT);
        Cursor c = database.rawQuery(SQL_SELECT_EMPLOYEE_TABLE_GUID_LOGIN, null);
        ArrayList<String> guids = getMerchantGuids(c);
        c.close();
        if (!guids.isEmpty()) {
            database.execSQL(SQL_UPDATE_EMPLOYEE_TABLE_IS_MERCHANT + "(" + makePlaceholders(guids.size()) + ")", guids.toArray(new String[guids.size()]));
        }

        database.execSQL(SQL_CREATE_CATEGORY_VIEW);

        database.execSQL(SQL_DROP_TOPUP);
        database.execSQL(SQL_DROP_PIN);

        database.execSQL(SQL_CREATE_113);
        database.execSQL(SQL_CREATE_114);
        database.execSQL(SQL_CREATE_115);
        database.execSQL(SQL_CREATE_116);

        database.execSQL(SQL_CREATE_UNIT_IS_DELETED);

        database.execSQL(SQl_ALTER_DROP_CATEGORY_VIEW);
        database.execSQL(SQL_CREATE_CATEGORY_VIEW_2);


    }

    static void update2to3(SQLiteDatabase database) {
        database.execSQL(SQL_CREATE_TIPS_REPORT_VIEW);
        database.execSQL(SQL_CREATE_WIRELESS_ITEM);
    }

    static void update1to2(SQLiteDatabase database) {
        database.execSQL(SQL_CREATE_1);
        database.execSQL(SQL_CREATE_2);
        database.execSQL(SQL_CREATE_3);
        database.execSQL(SQL_CREATE_4);
        database.execSQL(SQL_CREATE_5);
        database.execSQL(SQL_CREATE_6);
        database.execSQL(SQL_CREATE_7);
        database.execSQL(SQL_CREATE_9);
        database.execSQL(SQL_CREATE_10);
        database.execSQL(SQL_CREATE_11);
        database.execSQL(SQL_CREATE_12);
        database.execSQL(SQL_CREATE_13);
        database.execSQL(SQL_CREATE_14);
        database.execSQL(SQL_CREATE_15);
        database.execSQL(SQL_CREATE_16);
        database.execSQL(SQL_CREATE_17);

        database.execSQL(SQL_CREATE_EMPLOYEE_TIPS_SHIFT);
        database.execSQL(SQL_CREATE_EMPLOYEE_TIPS_CASHIER);
        database.execSQL(SQL_CREATE_EMPLOYEE_TIPS_ORDER);
        database.execSQL(SQL_CREATE_EMPLOYEE_TIPS_PAYMENT);
        database.execSQL(SQL_CREATE_EMPLOYEE_TIPS_IS_DELETED);
        database.execSQL(SQL_CREATE_CUSTOMER_LAST_NAME);
        database.execSQL(SQL_CREATE_CUSTOMER_EMAIL);
        database.execSQL(SQL_CREATE_CUSTOMER_IS_DELETED);
        database.execSQL(SQL_CREATE_SALE_ORDER_CUSTOMER);
        database.execSQL(SQL_CREATE_SALE_ORDER_REGISTER);
        database.execSQL(SQL_CREATE_UNIT_IS_DELETED);

        database.execSQL(SQL_CREATE_TIPS_VIEW);
        database.execSQL(SQL_CREATE_19);
        database.execSQL(SQL_CREATE_20);
        database.execSQL(SQL_CREATE_21);
        database.execSQL(SQL_CREATE_22);
        database.execSQL(SQL_CREATE_23);
        database.execSQL(SQL_CREATE_24);
        database.execSQL(SQL_CREATE_25);
        database.execSQL(SQL_CREATE_26);
        database.execSQL(SQL_CREATE_27);
        database.execSQL(SQL_CREATE_28);
        database.execSQL(SQL_CREATE_CUSTOMER_VIEW);
        database.execSQL(SQL_CREATE_EXPORT_ITEMS_VIEW);
        database.execSQL(SQL_CREATE_EXPORT_TOP_ITEMS_VIEW);
        database.execSQL(SQL_CREATE_ITEMS_EXT_VIEW);
        database.execSQL(SQL_CREATE_PAYMENT_TRANSACTION_VIEW);
        database.execSQL(SQL_CREATE_PREPAID_ORDER_VIEW);
        database.execSQL(SQL_CREATE_SO_ITEMS_FAST_VIEW);
        database.execSQL(SQL_CREATE_SO_ITEMS_VIEW);
        database.execSQL(SQL_CREATE_SO_SALE_REPORTS_ITEMS_VIEW);
        database.execSQL(SQL_CREATE_SO_VIEW);

        database.execSQL(SQL_UPDATE_PAYMENT_GATEWAY_OFFLINE_CREDIT);
        database.execSQL(SQL_UPDATE_PAYMENT_GATEWAY_CASH);
        database.execSQL(SQL_UPDATE_PAYMENT_GATEWAY_CHECK);
        database.execSQL(SQL_UPDATE_PAYMENT_GATEWAY_CREDIT);
        database.execSQL(SQL_UPDATE_PAYMENT_GATEWAY_BLACKSTONE);
        database.execSQL(SQL_UPDATE_PAYMENT_GATEWAY_PAYPAL);
    }

    private static String makePlaceholders(int len) {
        if (len < 1) {
            throw new RuntimeException("No placeholders");
        } else {
            StringBuilder sb = new StringBuilder(len * 2 - 1);
            sb.append("?");
            for (int i = 1; i < len; i++) {
                sb.append(",?");
            }
            return sb.toString();
        }
    }

    private static ArrayList<String> getMerchantGuids(Cursor c) {
        Pattern pattern = Pattern.compile("^[0-9]{3}$");
        ArrayList<String> guids = new ArrayList<String>();
        while (c.moveToNext()) {
            String login = c.getString(c.getColumnIndex("login"));
            if (!pattern.matcher(login).matches())
                guids.add(c.getString(c.getColumnIndex("guid")));
        }
        return guids;
    }

}
